import X from"./index.esm.DkxAiP-x.js";import{t as Pt,e as Pe,c as $,p as W,h as Kr,n as Yr,u as Wr}from"./index.esm.CYCeIzEj.js";import{c as vr,g as wr}from"./theme.DJSBbmha.js";import"./framework.CiS1NCC5.js";var it=function(){function t(){this.storage={}}return t.getInstance=function(e,r){return t.memoryInsMap.has(e)&&t.memoryInsMap.get(e)||t.memoryInsMap.set(e,new t),t.memoryInsMap.get(e)},t.prototype.get=function(e){return Promise.resolve(this.storage[e])},t.prototype.remove=function(e){return delete this.storage[e],Promise.resolve()},t.prototype.set=function(e,r){return this.storage[e]=r,Promise.resolve()},t.memoryInsMap=new Map,t}(),Tr=function(){function t(e){this.encryptImpl=void 0,this.encryptImpl=e}return t.prototype.setEncryptImp=function(e){this.encryptImpl=e},t.prototype.decrypt=function(e){return this.encryptImpl!=null&&this.encryptImpl!=null&&e!=null&&e!=null?this.encryptImpl.decrypt(e):e},t.prototype.encrypt=function(e){return this.encryptImpl!=null&&this.encryptImpl!=null&&e!=null&&e!=null?this.encryptImpl.encrypt(e):e},t}(),Gt=function(){function t(){this.DB_NAME="agcLocalStorageDb",this.OBJECT_STORE_NAME="agc",this.KEY_PATH="agcStorage",this.VERSION=1,this.agcCryptImpl=new Tr}return t.getInstance=function(e,r){if(!window.indexedDB)throw Pe.createLogger("AGCStorageService").error("Your environment doesn't support a stable version of IndexedDB."),new $(W.FAIL_TO_GET_STORAGE_SERVICE,{message:"Your environment doesn't support a stable version of IndexedDB."});t.indexedDBInsMap.has(e)&&t.indexedDBInsMap.get(e)||t.indexedDBInsMap.set(e,new t);var n=t.indexedDBInsMap.get(e);return n.agcCryptImpl.setEncryptImp(r),n},t.prototype.initIndexedDb=function(e){var r=this;return window.indexedDB?new Promise(function(n,i){var a=window.indexedDB.open(r.DB_NAME,r.VERSION),o=r;a.onupgradeneeded=function(f){var E=f.target.result;try{E.objectStoreNames.contains(o.OBJECT_STORE_NAME)||E.createObjectStore(o.OBJECT_STORE_NAME,{keyPath:o.KEY_PATH})}catch(h){i(h)}},a.onsuccess=function(f){try{n(f.target.result.transaction([o.OBJECT_STORE_NAME],e).objectStore(o.OBJECT_STORE_NAME))}catch(E){i(E)}},a.onerror=function(f){i(f.target.error)}}):Promise.reject(new $(W.FAIL_TO_GET_STORAGE_SERVICE,{message:"Your environment doesn't support a stable version of IndexedDB."},"storage"))},t.prototype.get=function(e){if(!e)return Promise.reject(new Error("get key is null"));var r=this;return this.initIndexedDb("readonly").then(function(n){return new Promise(function(i,a){try{var o=n.get(e);o.onsuccess=function(){var f=o.result;i(f!=null&&"value"in f?r.agcCryptImpl.decrypt(f.value):f)},o.onerror=function(f){a(f.target.error)}}catch(f){a(f)}})}).catch(function(n){return Promise.reject(n)})},t.prototype.set=function(e,r){if(!e||!r)return Promise.reject(new Error("set key or value is null"));var n={},i={};n[this.KEY_PATH]=e,i.value=this.agcCryptImpl.encrypt(r);var a=Object.assign(i,n);return this.initIndexedDb("readwrite").then(function(o){try{var f=o.get(e);return f.onsuccess=function(){var E=f.result,h=E!=null&&"value"in E?o.put(a):o.add(a);h.onsuccess=function(){return Promise.resolve()},h.onerror=function(u){return Promise.reject(u.target.error)}},f.onerror=function(E){return Promise.reject(E.target.error)},Promise.resolve()}catch(E){return Promise.reject(E)}}).catch(function(o){return Promise.reject(o)})},t.prototype.remove=function(e){return e?this.initIndexedDb("readwrite").then(function(r){try{var n=r.delete(e);return n.onsuccess=function(){return Promise.resolve()},n.onerror=function(i){return Promise.reject(i.target.error)},Promise.resolve()}catch(i){return Promise.reject(i)}}).catch(function(r){return Promise.reject(r)}):Promise.reject(new Error("remove key is null"))},t.indexedDBInsMap=new Map,t}(),qt=function(){function t(){this.agcCryptImpl=new Tr}return t.getInstance=function(e,r){if(!t.isSessionStorageAvailable())throw Pe.createLogger("AGCStorageService").error("Your environment doesn't support a stable version of sessionStorage."),new $(W.FAIL_TO_GET_STORAGE_SERVICE,{message:"Your environment doesn't support a stable version of sessionStorage."});!t.sessionMap.has(e)&&t.sessionMap.get(e)||t.sessionMap.set(e,new t);var n=t.sessionMap.get(e);return n.agcCryptImpl.setEncryptImp(r),n},t.isSessionStorageAvailable=function(){try{return sessionStorage.setItem("agctestKey","testValue"),sessionStorage.removeItem("agctestKey"),!0}catch{return!1}},t.prototype.get=function(e){if(!e)return Promise.reject(new Error("key is null"));try{var r=sessionStorage.getItem(e);return Promise.resolve(r===""?null:this.agcCryptImpl.decrypt(r))}catch(n){return Promise.reject(n)}},t.prototype.set=function(e,r){if(!e||!r)return Promise.reject(new Error("key or value is null"));try{return sessionStorage.setItem(e,this.agcCryptImpl.encrypt(r)),Promise.resolve()}catch(n){return Promise.reject(n)}},t.prototype.remove=function(e){if(!e)return Promise.reject(new Error("key is null"));try{return sessionStorage.removeItem(e),Promise.resolve()}catch(r){return Promise.reject(r)}},t.sessionMap=new Map,t}(),Jr=function(){function t(e){this.name=Pt,e&&(this.name=e)}return t.prototype.getStorageInstance=function(e,r){var n;switch(e){case 2:n=it.getInstance(this.name,r);break;case 0:n=Gt.getInstance(this.name,r);break;case 1:n=qt.getInstance(this.name,r);break;default:n=it.getInstance(this.name,r)}return n},t.prototype.createPersistentStorage=function(){return Gt.getInstance(this.name)},t.prototype.createTemporaryStorage=function(){return qt.getInstance(this.name)},t.prototype.createMemoryStorage=function(){return it.getInstance(this.name)},t}();X.registerInternalService({name:"AGCStorageService",serviceFactory:function(t){return new Jr(t.name())}});var Ze={exports:{}},yr={exports:{}},br={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,a=Math.floor,o="[BigNumber Error] ",f=o+"Number primitive has more than 15 significant digits: ",E=1e14,h=14,u=9007199254740991,C=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7,R=1e9;function A(U){var j,Z,ee,O=x.prototype={constructor:x,toString:null,valueOf:null},ie=new x(1),Y=20,z=4,te=-7,pe=21,de=-1e7,ge=1e7,Ie=!1,Ce=1,Se=0,Be={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},_e="0123456789abcdefghijklmnopqrstuvwxyz",Me=!0;function x(s,c){var l,T,g,v,S,d,m,b,w=this;if(!(w instanceof x))return new x(s,c);if(c==null){if(s&&s._isBigNumber===!0){w.s=s.s,!s.c||s.e>ge?w.c=w.e=null:s.e<de?w.c=[w.e=0]:(w.e=s.e,w.c=s.c.slice());return}if((d=typeof s=="number")&&s*0==0){if(w.s=1/s<0?(s=-s,-1):1,s===~~s){for(v=0,S=s;S>=10;S/=10,v++);v>ge?w.c=w.e=null:(w.e=v,w.c=[s]);return}b=String(s)}else{if(!n.test(b=String(s)))return ee(w,b,d);w.s=b.charCodeAt(0)==45?(b=b.slice(1),-1):1}(v=b.indexOf("."))>-1&&(b=b.replace(".","")),(S=b.search(/e/i))>0?(v<0&&(v=S),v+=+b.slice(S+1),b=b.substring(0,S)):v<0&&(v=b.length)}else{if(L(c,2,_e.length,"Base"),c==10&&Me)return w=new x(s),me(w,Y+w.e+1,z);if(b=String(s),d=typeof s=="number"){if(s*0!=0)return ee(w,b,d,c);if(w.s=1/s<0?(b=b.slice(1),-1):1,x.DEBUG&&b.replace(/^0\.0*|\./,"").length>15)throw Error(f+s)}else w.s=b.charCodeAt(0)===45?(b=b.slice(1),-1):1;for(l=_e.slice(0,c),v=S=0,m=b.length;S<m;S++)if(l.indexOf(T=b.charAt(S))<0){if(T=="."){if(S>v){v=m;continue}}else if(!g&&(b==b.toUpperCase()&&(b=b.toLowerCase())||b==b.toLowerCase()&&(b=b.toUpperCase()))){g=!0,S=-1,v=0;continue}return ee(w,String(s),d,c)}d=!1,b=Z(b,c,10,w.s),(v=b.indexOf("."))>-1?b=b.replace(".",""):v=b.length}for(S=0;b.charCodeAt(S)===48;S++);for(m=b.length;b.charCodeAt(--m)===48;);if(b=b.slice(S,++m)){if(m-=S,d&&x.DEBUG&&m>15&&(s>u||s!==a(s)))throw Error(f+w.s*s);if((v=v-S-1)>ge)w.c=w.e=null;else if(v<de)w.c=[w.e=0];else{if(w.e=v,w.c=[],S=(v+1)%h,v<0&&(S+=h),S<m){for(S&&w.c.push(+b.slice(0,S)),m-=h;S<m;)w.c.push(+b.slice(S,S+=h));S=h-(b=b.slice(S)).length}else S-=m;for(;S--;b+="0");w.c.push(+b)}}else w.c=[w.e=0]}x.clone=A,x.ROUND_UP=0,x.ROUND_DOWN=1,x.ROUND_CEIL=2,x.ROUND_FLOOR=3,x.ROUND_HALF_UP=4,x.ROUND_HALF_DOWN=5,x.ROUND_HALF_EVEN=6,x.ROUND_HALF_CEIL=7,x.ROUND_HALF_FLOOR=8,x.EUCLID=9,x.config=x.set=function(s){var c,l;if(s!=null)if(typeof s=="object"){if(s.hasOwnProperty(c="DECIMAL_PLACES")&&(l=s[c],L(l,0,R,c),Y=l),s.hasOwnProperty(c="ROUNDING_MODE")&&(l=s[c],L(l,0,8,c),z=l),s.hasOwnProperty(c="EXPONENTIAL_AT")&&(l=s[c],l&&l.pop?(L(l[0],-1e9,0,c),L(l[1],0,R,c),te=l[0],pe=l[1]):(L(l,-1e9,R,c),te=-(pe=l<0?-l:l))),s.hasOwnProperty(c="RANGE"))if(l=s[c],l&&l.pop)L(l[0],-1e9,-1,c),L(l[1],1,R,c),de=l[0],ge=l[1];else if(L(l,-1e9,R,c),l)de=-(ge=l<0?-l:l);else throw Error(o+c+" cannot be zero: "+l);if(s.hasOwnProperty(c="CRYPTO"))if(l=s[c],l===!!l)if(l)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Ie=l;else throw Ie=!l,Error(o+"crypto unavailable");else Ie=l;else throw Error(o+c+" not true or false: "+l);if(s.hasOwnProperty(c="MODULO_MODE")&&(l=s[c],L(l,0,9,c),Ce=l),s.hasOwnProperty(c="POW_PRECISION")&&(l=s[c],L(l,0,R,c),Se=l),s.hasOwnProperty(c="FORMAT"))if(l=s[c],typeof l=="object")Be=l;else throw Error(o+c+" not an object: "+l);if(s.hasOwnProperty(c="ALPHABET"))if(l=s[c],typeof l=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(l))Me=l.slice(0,10)=="0123456789",_e=l;else throw Error(o+c+" invalid: "+l)}else throw Error(o+"Object expected: "+s);return{DECIMAL_PLACES:Y,ROUNDING_MODE:z,EXPONENTIAL_AT:[te,pe],RANGE:[de,ge],CRYPTO:Ie,MODULO_MODE:Ce,POW_PRECISION:Se,FORMAT:Be,ALPHABET:_e}},x.isBigNumber=function(s){if(!s||s._isBigNumber!==!0)return!1;if(!x.DEBUG)return!0;var c,l,T=s.c,g=s.e,v=s.s;e:if({}.toString.call(T)=="[object Array]"){if((v===1||v===-1)&&g>=-1e9&&g<=R&&g===a(g)){if(T[0]===0){if(g===0&&T.length===1)return!0;break e}if(c=(g+1)%h,c<1&&(c+=h),String(T[0]).length==c){for(c=0;c<T.length;c++)if(l=T[c],l<0||l>=E||l!==a(l))break e;if(l!==0)return!0}}}else if(T===null&&g===null&&(v===null||v===1||v===-1))return!0;throw Error(o+"Invalid BigNumber: "+s)},x.maximum=x.max=function(){return Ue(arguments,-1)},x.minimum=x.min=function(){return Ue(arguments,1)},x.random=function(){var s=9007199254740992,c=Math.random()*s&2097151?function(){return a(Math.random()*s)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(l){var T,g,v,S,d,m=0,b=[],w=new x(ie);if(l==null?l=Y:L(l,0,R),S=i(l/h),Ie)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(S*=2));m<S;)d=T[m]*131072+(T[m+1]>>>11),d>=9e15?(g=crypto.getRandomValues(new Uint32Array(2)),T[m]=g[0],T[m+1]=g[1]):(b.push(d%1e14),m+=2);m=S/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(S*=7);m<S;)d=(T[m]&31)*281474976710656+T[m+1]*1099511627776+T[m+2]*4294967296+T[m+3]*16777216+(T[m+4]<<16)+(T[m+5]<<8)+T[m+6],d>=9e15?crypto.randomBytes(7).copy(T,m):(b.push(d%1e14),m+=7);m=S/7}else throw Ie=!1,Error(o+"crypto unavailable");if(!Ie)for(;m<S;)d=c(),d<9e15&&(b[m++]=d%1e14);for(S=b[--m],l%=h,S&&l&&(d=C[h-l],b[m]=a(S/d)*d);b[m]===0;b.pop(),m--);if(m<0)b=[v=0];else{for(v=-1;b[0]===0;b.splice(0,1),v-=h);for(m=1,d=b[0];d>=10;d/=10,m++);m<h&&(v-=h-m)}return w.e=v,w.c=b,w}}(),x.sum=function(){for(var s=1,c=arguments,l=new x(c[0]);s<c.length;)l=l.plus(c[s++]);return l},Z=function(){var s="0123456789";function c(l,T,g,v){for(var S,d=[0],m,b=0,w=l.length;b<w;){for(m=d.length;m--;d[m]*=T);for(d[0]+=v.indexOf(l.charAt(b++)),S=0;S<d.length;S++)d[S]>g-1&&(d[S+1]==null&&(d[S+1]=0),d[S+1]+=d[S]/g|0,d[S]%=g)}return d.reverse()}return function(l,T,g,v,S){var d,m,b,w,I,M,V,J,F=l.indexOf("."),q=Y,P=z;for(F>=0&&(w=Se,Se=0,l=l.replace(".",""),J=new x(T),M=J.pow(l.length-F),Se=w,J.c=c(N(_(M.c),M.e,"0"),10,g,s),J.e=J.c.length),V=c(l,T,g,S?(d=_e,s):(d=s,_e)),b=w=V.length;V[--w]==0;V.pop());if(!V[0])return d.charAt(0);if(F<0?--b:(M.c=V,M.e=b,M.s=v,M=j(M,J,q,P,g),V=M.c,I=M.r,b=M.e),m=b+q+1,F=V[m],w=g/2,I=I||m<0||V[m+1]!=null,I=P<4?(F!=null||I)&&(P==0||P==(M.s<0?3:2)):F>w||F==w&&(P==4||I||P==6&&V[m-1]&1||P==(M.s<0?8:7)),m<1||!V[0])l=I?N(d.charAt(1),-q,d.charAt(0)):d.charAt(0);else{if(V.length=m,I)for(--g;++V[--m]>g;)V[m]=0,m||(++b,V=[1].concat(V));for(w=V.length;!V[--w];);for(F=0,l="";F<=w;l+=d.charAt(V[F++]));l=N(l,b,d.charAt(0))}return l}}(),j=function(){function s(T,g,v){var S,d,m,b,w=0,I=T.length,M=g%p,V=g/p|0;for(T=T.slice();I--;)m=T[I]%p,b=T[I]/p|0,S=V*m+b*M,d=M*m+S%p*p+w,w=(d/v|0)+(S/p|0)+V*b,T[I]=d%v;return w&&(T=[w].concat(T)),T}function c(T,g,v,S){var d,m;if(v!=S)m=v>S?1:-1;else for(d=m=0;d<v;d++)if(T[d]!=g[d]){m=T[d]>g[d]?1:-1;break}return m}function l(T,g,v,S){for(var d=0;v--;)T[v]-=d,d=T[v]<g[v]?1:0,T[v]=d*S+T[v]-g[v];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,g,v,S,d){var m,b,w,I,M,V,J,F,q,P,D,oe,Ee,k,xe,ae,Oe,ve=T.s==g.s?1:-1,we=T.c,se=g.c;if(!we||!we[0]||!se||!se[0])return new x(!T.s||!g.s||(we?se&&we[0]==se[0]:!se)?NaN:we&&we[0]==0||!se?ve*0:ve/0);for(F=new x(ve),q=F.c=[],b=T.e-g.e,ve=v+b+1,d||(d=E,b=y(T.e/h)-y(g.e/h),ve=ve/h|0),w=0;se[w]==(we[w]||0);w++);if(se[w]>(we[w]||0)&&b--,ve<0)q.push(1),I=!0;else{for(k=we.length,ae=se.length,w=0,ve+=2,M=a(d/(se[0]+1)),M>1&&(se=s(se,M,d),we=s(we,M,d),ae=se.length,k=we.length),Ee=ae,P=we.slice(0,ae),D=P.length;D<ae;P[D++]=0);Oe=se.slice(),Oe=[0].concat(Oe),xe=se[0],se[1]>=d/2&&xe++;do{if(M=0,m=c(se,P,ae,D),m<0){if(oe=P[0],ae!=D&&(oe=oe*d+(P[1]||0)),M=a(oe/xe),M>1)for(M>=d&&(M=d-1),V=s(se,M,d),J=V.length,D=P.length;c(V,P,J,D)==1;)M--,l(V,ae<J?Oe:se,J,d),J=V.length,m=1;else M==0&&(m=M=1),V=se.slice(),J=V.length;if(J<D&&(V=[0].concat(V)),l(P,V,D,d),D=P.length,m==-1)for(;c(se,P,ae,D)<1;)M++,l(P,ae<D?Oe:se,D,d),D=P.length}else m===0&&(M++,P=[0]);q[w++]=M,P[0]?P[D++]=we[Ee]||0:(P=[we[Ee]],D=1)}while((Ee++<k||P[0]!=null)&&ve--);I=P[0]!=null,q[0]||q.splice(0,1)}if(d==E){for(w=1,ve=q[0];ve>=10;ve/=10,w++);me(F,v+(F.e=w+b*h-1)+1,S,I)}else F.e=b,F.r=+I;return F}}();function Ne(s,c,l,T){var g,v,S,d,m;if(l==null?l=z:L(l,0,8),!s.c)return s.toString();if(g=s.c[0],S=s.e,c==null)m=_(s.c),m=T==1||T==2&&(S<=te||S>=pe)?G(m,S):N(m,S,"0");else if(s=me(new x(s),c,l),v=s.e,m=_(s.c),d=m.length,T==1||T==2&&(c<=v||v<=te)){for(;d<c;m+="0",d++);m=G(m,v)}else if(c-=S,m=N(m,v,"0"),v+1>d){if(--c>0)for(m+=".";c--;m+="0");}else if(c+=v-d,c>0)for(v+1==d&&(m+=".");c--;m+="0");return s.s<0&&g?"-"+m:m}function Ue(s,c){for(var l,T,g=1,v=new x(s[0]);g<s.length;g++)T=new x(s[g]),(!T.s||(l=H(v,T))===c||l===0&&v.s===c)&&(v=T);return v}function Le(s,c,l){for(var T=1,g=c.length;!c[--g];c.pop());for(g=c[0];g>=10;g/=10,T++);return(l=T+l*h-1)>ge?s.c=s.e=null:l<de?s.c=[s.e=0]:(s.e=l,s.c=c),s}ee=function(){var s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,c=/^([^.]+)\.$/,l=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,g=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(v,S,d,m){var b,w=d?S:S.replace(g,"");if(T.test(w))v.s=isNaN(w)?null:w<0?-1:1;else{if(!d&&(w=w.replace(s,function(I,M,V){return b=(V=V.toLowerCase())=="x"?16:V=="b"?2:8,!m||m==b?M:I}),m&&(b=m,w=w.replace(c,"$1").replace(l,"0.$1")),S!=w))return new x(w,b);if(x.DEBUG)throw Error(o+"Not a"+(m?" base "+m:"")+" number: "+S);v.s=null}v.c=v.e=null}}();function me(s,c,l,T){var g,v,S,d,m,b,w,I=s.c,M=C;if(I){e:{for(g=1,d=I[0];d>=10;d/=10,g++);if(v=c-g,v<0)v+=h,S=c,m=I[b=0],w=a(m/M[g-S-1]%10);else if(b=i((v+1)/h),b>=I.length)if(T){for(;I.length<=b;I.push(0));m=w=0,g=1,v%=h,S=v-h+1}else break e;else{for(m=d=I[b],g=1;d>=10;d/=10,g++);v%=h,S=v-h+g,w=S<0?0:a(m/M[g-S-1]%10)}if(T=T||c<0||I[b+1]!=null||(S<0?m:m%M[g-S-1]),T=l<4?(w||T)&&(l==0||l==(s.s<0?3:2)):w>5||w==5&&(l==4||T||l==6&&(v>0?S>0?m/M[g-S]:0:I[b-1])%10&1||l==(s.s<0?8:7)),c<1||!I[0])return I.length=0,T?(c-=s.e+1,I[0]=M[(h-c%h)%h],s.e=-c||0):I[0]=s.e=0,s;if(v==0?(I.length=b,d=1,b--):(I.length=b+1,d=M[h-v],I[b]=S>0?a(m/M[g-S]%M[S])*d:0),T)for(;;)if(b==0){for(v=1,S=I[0];S>=10;S/=10,v++);for(S=I[0]+=d,d=1;S>=10;S/=10,d++);v!=d&&(s.e++,I[0]==E&&(I[0]=1));break}else{if(I[b]+=d,I[b]!=E)break;I[b--]=0,d=1}for(v=I.length;I[--v]===0;I.pop());}s.e>ge?s.c=s.e=null:s.e<de&&(s.c=[s.e=0])}return s}function Ae(s){var c,l=s.e;return l===null?s.toString():(c=_(s.c),c=l<=te||l>=pe?G(c,l):N(c,l,"0"),s.s<0?"-"+c:c)}return O.absoluteValue=O.abs=function(){var s=new x(this);return s.s<0&&(s.s=1),s},O.comparedTo=function(s,c){return H(this,new x(s,c))},O.decimalPlaces=O.dp=function(s,c){var l,T,g,v=this;if(s!=null)return L(s,0,R),c==null?c=z:L(c,0,8),me(new x(v),s+v.e+1,c);if(!(l=v.c))return null;if(T=((g=l.length-1)-y(this.e/h))*h,g=l[g])for(;g%10==0;g/=10,T--);return T<0&&(T=0),T},O.dividedBy=O.div=function(s,c){return j(this,new x(s,c),Y,z)},O.dividedToIntegerBy=O.idiv=function(s,c){return j(this,new x(s,c),0,1)},O.exponentiatedBy=O.pow=function(s,c){var l,T,g,v,S,d,m,b,w,I=this;if(s=new x(s),s.c&&!s.isInteger())throw Error(o+"Exponent not an integer: "+Ae(s));if(c!=null&&(c=new x(c)),d=s.e>14,!I.c||!I.c[0]||I.c[0]==1&&!I.e&&I.c.length==1||!s.c||!s.c[0])return w=new x(Math.pow(+Ae(I),d?s.s*(2-B(s)):+Ae(s))),c?w.mod(c):w;if(m=s.s<0,c){if(c.c?!c.c[0]:!c.s)return new x(NaN);T=!m&&I.isInteger()&&c.isInteger(),T&&(I=I.mod(c))}else{if(s.e>9&&(I.e>0||I.e<-1||(I.e==0?I.c[0]>1||d&&I.c[1]>=24e7:I.c[0]<8e13||d&&I.c[0]<=9999975e7)))return v=I.s<0&&B(s)?-0:0,I.e>-1&&(v=1/v),new x(m?1/v:v);Se&&(v=i(Se/h+2))}for(d?(l=new x(.5),m&&(s.s=1),b=B(s)):(g=Math.abs(+Ae(s)),b=g%2),w=new x(ie);;){if(b){if(w=w.times(I),!w.c)break;v?w.c.length>v&&(w.c.length=v):T&&(w=w.mod(c))}if(g){if(g=a(g/2),g===0)break;b=g%2}else if(s=s.times(l),me(s,s.e+1,1),s.e>14)b=B(s);else{if(g=+Ae(s),g===0)break;b=g%2}I=I.times(I),v?I.c&&I.c.length>v&&(I.c.length=v):T&&(I=I.mod(c))}return T?w:(m&&(w=ie.div(w)),c?w.mod(c):v?me(w,Se,z,S):w)},O.integerValue=function(s){var c=new x(this);return s==null?s=z:L(s,0,8),me(c,c.e+1,s)},O.isEqualTo=O.eq=function(s,c){return H(this,new x(s,c))===0},O.isFinite=function(){return!!this.c},O.isGreaterThan=O.gt=function(s,c){return H(this,new x(s,c))>0},O.isGreaterThanOrEqualTo=O.gte=function(s,c){return(c=H(this,new x(s,c)))===1||c===0},O.isInteger=function(){return!!this.c&&y(this.e/h)>this.c.length-2},O.isLessThan=O.lt=function(s,c){return H(this,new x(s,c))<0},O.isLessThanOrEqualTo=O.lte=function(s,c){return(c=H(this,new x(s,c)))===-1||c===0},O.isNaN=function(){return!this.s},O.isNegative=function(){return this.s<0},O.isPositive=function(){return this.s>0},O.isZero=function(){return!!this.c&&this.c[0]==0},O.minus=function(s,c){var l,T,g,v,S=this,d=S.s;if(s=new x(s,c),c=s.s,!d||!c)return new x(NaN);if(d!=c)return s.s=-c,S.plus(s);var m=S.e/h,b=s.e/h,w=S.c,I=s.c;if(!m||!b){if(!w||!I)return w?(s.s=-c,s):new x(I?S:NaN);if(!w[0]||!I[0])return I[0]?(s.s=-c,s):new x(w[0]?S:z==3?-0:0)}if(m=y(m),b=y(b),w=w.slice(),d=m-b){for((v=d<0)?(d=-d,g=w):(b=m,g=I),g.reverse(),c=d;c--;g.push(0));g.reverse()}else for(T=(v=(d=w.length)<(c=I.length))?d:c,d=c=0;c<T;c++)if(w[c]!=I[c]){v=w[c]<I[c];break}if(v&&(g=w,w=I,I=g,s.s=-s.s),c=(T=I.length)-(l=w.length),c>0)for(;c--;w[l++]=0);for(c=E-1;T>d;){if(w[--T]<I[T]){for(l=T;l&&!w[--l];w[l]=c);--w[l],w[T]+=E}w[T]-=I[T]}for(;w[0]==0;w.splice(0,1),--b);return w[0]?Le(s,w,b):(s.s=z==3?-1:1,s.c=[s.e=0],s)},O.modulo=O.mod=function(s,c){var l,T,g=this;return s=new x(s,c),!g.c||!s.s||s.c&&!s.c[0]?new x(NaN):!s.c||g.c&&!g.c[0]?new x(g):(Ce==9?(T=s.s,s.s=1,l=j(g,s,0,3),s.s=T,l.s*=T):l=j(g,s,0,Ce),s=g.minus(l.times(s)),!s.c[0]&&Ce==1&&(s.s=g.s),s)},O.multipliedBy=O.times=function(s,c){var l,T,g,v,S,d,m,b,w,I,M,V,J,F,q,P=this,D=P.c,oe=(s=new x(s,c)).c;if(!D||!oe||!D[0]||!oe[0])return!P.s||!s.s||D&&!D[0]&&!oe||oe&&!oe[0]&&!D?s.c=s.e=s.s=null:(s.s*=P.s,!D||!oe?s.c=s.e=null:(s.c=[0],s.e=0)),s;for(T=y(P.e/h)+y(s.e/h),s.s*=P.s,m=D.length,I=oe.length,m<I&&(J=D,D=oe,oe=J,g=m,m=I,I=g),g=m+I,J=[];g--;J.push(0));for(F=E,q=p,g=I;--g>=0;){for(l=0,M=oe[g]%q,V=oe[g]/q|0,S=m,v=g+S;v>g;)b=D[--S]%q,w=D[S]/q|0,d=V*b+w*M,b=M*b+d%q*q+J[v]+l,l=(b/F|0)+(d/q|0)+V*w,J[v--]=b%F;J[v]=l}return l?++T:J.splice(0,1),Le(s,J,T)},O.negated=function(){var s=new x(this);return s.s=-s.s||null,s},O.plus=function(s,c){var l,T=this,g=T.s;if(s=new x(s,c),c=s.s,!g||!c)return new x(NaN);if(g!=c)return s.s=-c,T.minus(s);var v=T.e/h,S=s.e/h,d=T.c,m=s.c;if(!v||!S){if(!d||!m)return new x(g/0);if(!d[0]||!m[0])return m[0]?s:new x(d[0]?T:g*0)}if(v=y(v),S=y(S),d=d.slice(),g=v-S){for(g>0?(S=v,l=m):(g=-g,l=d),l.reverse();g--;l.push(0));l.reverse()}for(g=d.length,c=m.length,g-c<0&&(l=m,m=d,d=l,c=g),g=0;c;)g=(d[--c]=d[c]+m[c]+g)/E|0,d[c]=E===d[c]?0:d[c]%E;return g&&(d=[g].concat(d),++S),Le(s,d,S)},O.precision=O.sd=function(s,c){var l,T,g,v=this;if(s!=null&&s!==!!s)return L(s,1,R),c==null?c=z:L(c,0,8),me(new x(v),s,c);if(!(l=v.c))return null;if(g=l.length-1,T=g*h+1,g=l[g]){for(;g%10==0;g/=10,T--);for(g=l[0];g>=10;g/=10,T++);}return s&&v.e+1>T&&(T=v.e+1),T},O.shiftedBy=function(s){return L(s,-9007199254740991,u),this.times("1e"+s)},O.squareRoot=O.sqrt=function(){var s,c,l,T,g,v=this,S=v.c,d=v.s,m=v.e,b=Y+4,w=new x("0.5");if(d!==1||!S||!S[0])return new x(!d||d<0&&(!S||S[0])?NaN:S?v:1/0);if(d=Math.sqrt(+Ae(v)),d==0||d==1/0?(c=_(S),(c.length+m)%2==0&&(c+="0"),d=Math.sqrt(+c),m=y((m+1)/2)-(m<0||m%2),d==1/0?c="5e"+m:(c=d.toExponential(),c=c.slice(0,c.indexOf("e")+1)+m),l=new x(c)):l=new x(d+""),l.c[0]){for(m=l.e,d=m+b,d<3&&(d=0);;)if(g=l,l=w.times(g.plus(j(v,g,b,1))),_(g.c).slice(0,d)===(c=_(l.c)).slice(0,d))if(l.e<m&&--d,c=c.slice(d-3,d+1),c=="9999"||!T&&c=="4999"){if(!T&&(me(g,g.e+Y+2,0),g.times(g).eq(v))){l=g;break}b+=4,d+=4,T=1}else{(!+c||!+c.slice(1)&&c.charAt(0)=="5")&&(me(l,l.e+Y+2,1),s=!l.times(l).eq(v));break}}return me(l,l.e+Y+1,z,s)},O.toExponential=function(s,c){return s!=null&&(L(s,0,R),s++),Ne(this,s,c,1)},O.toFixed=function(s,c){return s!=null&&(L(s,0,R),s=s+this.e+1),Ne(this,s,c)},O.toFormat=function(s,c,l){var T,g=this;if(l==null)s!=null&&c&&typeof c=="object"?(l=c,c=null):s&&typeof s=="object"?(l=s,s=c=null):l=Be;else if(typeof l!="object")throw Error(o+"Argument not an object: "+l);if(T=g.toFixed(s,c),g.c){var v,S=T.split("."),d=+l.groupSize,m=+l.secondaryGroupSize,b=l.groupSeparator||"",w=S[0],I=S[1],M=g.s<0,V=M?w.slice(1):w,J=V.length;if(m&&(v=d,d=m,m=v,J-=v),d>0&&J>0){for(v=J%d||d,w=V.substr(0,v);v<J;v+=d)w+=b+V.substr(v,d);m>0&&(w+=b+V.slice(v)),M&&(w="-"+w)}T=I?w+(l.decimalSeparator||"")+((m=+l.fractionGroupSize)?I.replace(new RegExp("\\d{"+m+"}\\B","g"),"$&"+(l.fractionGroupSeparator||"")):I):w}return(l.prefix||"")+T+(l.suffix||"")},O.toFraction=function(s){var c,l,T,g,v,S,d,m,b,w,I,M,V=this,J=V.c;if(s!=null&&(d=new x(s),!d.isInteger()&&(d.c||d.s!==1)||d.lt(ie)))throw Error(o+"Argument "+(d.isInteger()?"out of range: ":"not an integer: ")+Ae(d));if(!J)return new x(V);for(c=new x(ie),b=l=new x(ie),T=m=new x(ie),M=_(J),v=c.e=M.length-V.e-1,c.c[0]=C[(S=v%h)<0?h+S:S],s=!s||d.comparedTo(c)>0?v>0?c:b:d,S=ge,ge=1/0,d=new x(M),m.c[0]=0;w=j(d,c,0,1),g=l.plus(w.times(T)),g.comparedTo(s)!=1;)l=T,T=g,b=m.plus(w.times(g=b)),m=g,c=d.minus(w.times(g=c)),d=g;return g=j(s.minus(l),T,0,1),m=m.plus(g.times(b)),l=l.plus(g.times(T)),m.s=b.s=V.s,v=v*2,I=j(b,T,v,z).minus(V).abs().comparedTo(j(m,l,v,z).minus(V).abs())<1?[b,T]:[m,l],ge=S,I},O.toNumber=function(){return+Ae(this)},O.toPrecision=function(s,c){return s!=null&&L(s,1,R),Ne(this,s,c,2)},O.toString=function(s){var c,l=this,T=l.s,g=l.e;return g===null?T?(c="Infinity",T<0&&(c="-"+c)):c="NaN":(s==null?c=g<=te||g>=pe?G(_(l.c),g):N(_(l.c),g,"0"):s===10&&Me?(l=me(new x(l),Y+g+1,z),c=N(_(l.c),l.e,"0")):(L(s,2,_e.length,"Base"),c=Z(N(_(l.c),g,"0"),10,s,T,!0)),T<0&&l.c[0]&&(c="-"+c)),c},O.valueOf=O.toJSON=function(){return Ae(this)},O._isBigNumber=!0,U!=null&&x.set(U),x}function y(U){var j=U|0;return U>0||U===j?j:j-1}function _(U){for(var j,Z,ee=1,O=U.length,ie=U[0]+"";ee<O;){for(j=U[ee++]+"",Z=h-j.length;Z--;j="0"+j);ie+=j}for(O=ie.length;ie.charCodeAt(--O)===48;);return ie.slice(0,O+1||1)}function H(U,j){var Z,ee,O=U.c,ie=j.c,Y=U.s,z=j.s,te=U.e,pe=j.e;if(!Y||!z)return null;if(Z=O&&!O[0],ee=ie&&!ie[0],Z||ee)return Z?ee?0:-z:Y;if(Y!=z)return Y;if(Z=Y<0,ee=te==pe,!O||!ie)return ee?0:!O^Z?1:-1;if(!ee)return te>pe^Z?1:-1;for(z=(te=O.length)<(pe=ie.length)?te:pe,Y=0;Y<z;Y++)if(O[Y]!=ie[Y])return O[Y]>ie[Y]^Z?1:-1;return te==pe?0:te>pe^Z?1:-1}function L(U,j,Z,ee){if(U<j||U>Z||U!==a(U))throw Error(o+(ee||"Argument")+(typeof U=="number"?U<j||U>Z?" out of range: ":" not an integer: ":" not a primitive number: ")+String(U))}function B(U){var j=U.c.length-1;return y(U.e/h)==j&&U.c[j]%2!=0}function G(U,j){return(U.length>1?U.charAt(0)+"."+U.slice(1):U)+(j<0?"e":"e+")+j}function N(U,j,Z){var ee,O;if(j<0){for(O=Z+".";++j;O+=Z);U=O+U}else if(ee=U.length,++j>ee){for(O=Z,j-=ee;--j;O+=Z);U+=O}else j<ee&&(U=U.slice(0,j)+"."+U.slice(j));return U}r=A(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(vr)})(br);var Sr=br.exports;(function(t){var e=Sr,r=t.exports;(function(){var n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i,a,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f;function E(u){return n.lastIndex=0,n.test(u)?'"'+u.replace(n,function(C){var p=o[C];return typeof p=="string"?p:"\\u"+("0000"+C.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+u+'"'}function h(u,C){var p,R,A,y,_=i,H,L=C[u],B=L!=null&&(L instanceof e||e.isBigNumber(L));switch(L&&typeof L=="object"&&typeof L.toJSON=="function"&&(L=L.toJSON(u)),typeof f=="function"&&(L=f.call(C,u,L)),typeof L){case"string":return B?L:E(L);case"number":return isFinite(L)?String(L):"null";case"boolean":case"null":case"bigint":return String(L);case"object":if(!L)return"null";if(i+=a,H=[],Object.prototype.toString.apply(L)==="[object Array]"){for(y=L.length,p=0;p<y;p+=1)H[p]=h(p,L)||"null";return A=H.length===0?"[]":i?`[
`+i+H.join(`,
`+i)+`
`+_+"]":"["+H.join(",")+"]",i=_,A}if(f&&typeof f=="object")for(y=f.length,p=0;p<y;p+=1)typeof f[p]=="string"&&(R=f[p],A=h(R,L),A&&H.push(E(R)+(i?": ":":")+A));else Object.keys(L).forEach(function(G){var N=h(G,L);N&&H.push(E(G)+(i?": ":":")+N)});return A=H.length===0?"{}":i?`{
`+i+H.join(`,
`+i)+`
`+_+"}":"{"+H.join(",")+"}",i=_,A}}typeof r.stringify!="function"&&(r.stringify=function(u,C,p){var R;if(i="",a="",typeof p=="number")for(R=0;R<p;R+=1)a+=" ";else typeof p=="string"&&(a=p);if(f=C,C&&typeof C!="function"&&(typeof C!="object"||typeof C.length!="number"))throw new Error("JSON.stringify");return h("",{"":u})})})()})(yr);var zr=yr.exports,We=null;const Xr=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,Qr=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var Zr=function(t){var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction<"u")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction<"u")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,n,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},a,o=function(y){throw{name:"SyntaxError",message:y,at:r,text:a}},f=function(y){return y&&y!==n&&o("Expected '"+y+"' instead of '"+n+"'"),n=a.charAt(r),r+=1,n},E=function(){var y,_="";for(n==="-"&&(_="-",f("-"));n>="0"&&n<="9";)_+=n,f();if(n===".")for(_+=".";f()&&n>="0"&&n<="9";)_+=n;if(n==="e"||n==="E")for(_+=n,f(),(n==="-"||n==="+")&&(_+=n,f());n>="0"&&n<="9";)_+=n,f();if(y=+_,!isFinite(y))o("Bad number");else return We==null&&(We=Sr),_.length>15?e.storeAsString?_:e.useNativeBigInt?BigInt(_):new We(_):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(y):new We(y):y},h=function(){var y,_,H="",L;if(n==='"')for(var B=r;f();){if(n==='"')return r-1>B&&(H+=a.substring(B,r-1)),f(),H;if(n==="\\"){if(r-1>B&&(H+=a.substring(B,r-1)),f(),n==="u"){for(L=0,_=0;_<4&&(y=parseInt(f(),16),!!isFinite(y));_+=1)L=L*16+y;H+=String.fromCharCode(L)}else if(typeof i[n]=="string")H+=i[n];else break;B=r}}o("Bad string")},u=function(){for(;n&&n<=" ";)f()},C=function(){switch(n){case"t":return f("t"),f("r"),f("u"),f("e"),!0;case"f":return f("f"),f("a"),f("l"),f("s"),f("e"),!1;case"n":return f("n"),f("u"),f("l"),f("l"),null}o("Unexpected '"+n+"'")},p,R=function(){var y=[];if(n==="["){if(f("["),u(),n==="]")return f("]"),y;for(;n;){if(y.push(p()),u(),n==="]")return f("]"),y;f(","),u()}}o("Bad array")},A=function(){var y,_=Object.create(null);if(n==="{"){if(f("{"),u(),n==="}")return f("}"),_;for(;n;){if(y=h(),u(),f(":"),e.strict===!0&&Object.hasOwnProperty.call(_,y)&&o('Duplicate key "'+y+'"'),Xr.test(y)===!0?e.protoAction==="error"?o("Object contains forbidden prototype property"):e.protoAction==="ignore"?p():_[y]=p():Qr.test(y)===!0?e.constructorAction==="error"?o("Object contains forbidden constructor property"):e.constructorAction==="ignore"?p():_[y]=p():_[y]=p(),u(),n==="}")return f("}"),_;f(","),u()}}o("Bad object")};return p=function(){switch(u(),n){case"{":return A();case"[":return R();case'"':return h();case"-":return E();default:return n>="0"&&n<="9"?E():C()}},function(y,_){var H;return a=y+"",r=0,n=" ",H=p(),u(),n&&o("Syntax error"),typeof _=="function"?function L(B,G){var N,U=B[G];return U&&typeof U=="object"&&Object.keys(U).forEach(function(j){N=L(U,j),N!==void 0?U[j]=N:delete U[j]}),_.call(B,G,U)}({"":H},""):H}},en=Zr,_r=zr.stringify,Ar=en;Ze.exports=function(t){return{parse:Ar(t),stringify:_r}};Ze.exports.parse=Ar();Ze.exports.stringify=_r;var tn=Ze.exports;const rn=wr(tn);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function nn(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(h){try{E(n.next(h))}catch(u){a(u)}}function f(h){try{E(n.throw(h))}catch(u){a(u)}}function E(h){var u;h.done?i(h.value):(u=h.value,u instanceof r?u:new r(function(C){C(u)})).then(o,f)}E((n=n.apply(t,[])).next())})}function on(t,e){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function f(E){return function(h){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(C){u=[6,C],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([E,h])}}}var Ht,sn=function(){function t(){this.storageImpl=void 0}return t.prototype.getAaid=function(e){return nn(this,void 0,void 0,function(){var r,n,i,a,o;return on(this,function(f){switch(f.label){case 0:r=Pe.createLogger("ClientInfoService"),f.label=1;case 1:return f.trys.push([1,5,,6]),n="agcAaid_"+e.name()+":"+e.config().client.client_id,e.name()===Pt&&(n="agcAaid:"+e.config().client.client_id),(i=e.getService("AGCStorageService"))==null?(r.error("Get AGC storage Service failed."),[2,Promise.reject(new $(W.GET_AAID_ERROR,{message:"get AGC storage Service failed"},"util"))]):(this.storageImpl||(this.storageImpl=i.getStorageInstance(t.persistence)),[4,this.storageImpl.get(n).catch(function(E){return r.error("get aaid failed",E.message),Promise.reject(new $(W.GET_AAID_ERROR,{message:"get aaid from storage failed"},"util"))})]);case 2:return(a=f.sent())!=null&&a!=null&&a!=""?[3,4]:(a=this.getRandomString(),[4,this.storageImpl.set(n,a).catch(function(E){return r.error("get aaid failed",E.message),Promise.reject(new $(W.GET_AAID_ERROR,{message:"save aaid to storage failed"},"util"))})]);case 3:f.sent(),f.label=4;case 4:return[2,a];case 5:return o=f.sent(),r.error("get aaid failed",o.message),[2,Promise.reject(new $(W.GET_AAID_ERROR,o,"util"))];case 6:return[2]}})})},t.prototype.getRandomString=function(){var e="0123456789abcdef",r=e.length;return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/x/g,function(){return e.charAt(Math.floor(Math.random()*r))})},t.persistence=0,t.INSTANCE=new t,t}(),an=function(){function t(){}return t.getEnvironmentIns=function(){return t.instance},t.prototype.isBrowser=function(){return typeof self=="object"&&self.self===self},t.prototype.isNodeJS=function(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}},t.prototype.isReactNative=function(){return typeof navigator=="object"&&navigator.product==="ReactNative"},t.prototype.isQuickApp=function(){try{return global&&"fastapp"in global}catch{return!1}},t.instance=new t,t}(),un=function(){function t(e){this.instance=e||X.instance()}return t.prototype.getAaid=function(){return sn.INSTANCE.getAaid(this.instance)},t.prototype.getEnvironmentUtil=function(){return an.getEnvironmentIns()},t}();function $t(t){return t!=null}(function(t){var e=function(r,n,i){if(typeof r=="function"||$t(n)||$t(i))this.next=r,this.error=n||null,this.complete=i||null;else{var a=r;this.next=a.next||null,this.error=a.error||null,this.complete=a.complete||null}};t.ObserverImpl=e})(Ht||(Ht={})),X.registerInternalService({name:"ClientInfoService",serviceFactory:function(t){return new un(t)}});var Nt={exports:{}},Rr=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},cn=Rr,kt=Object.prototype.toString,Mt=function(t){return function(e){var r=kt.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function Ve(t){return t=t.toLowerCase(),function(r){return Mt(r)===t}}function Lt(t){return Array.isArray(t)}function Xe(t){return typeof t>"u"}function fn(t){return t!==null&&!Xe(t)&&t.constructor!==null&&!Xe(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var Ir=Ve("ArrayBuffer");function ln(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Ir(t.buffer),e}function pn(t){return typeof t=="string"}function hn(t){return typeof t=="number"}function Cr(t){return t!==null&&typeof t=="object"}function Je(t){if(Mt(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var dn=Ve("Date"),gn=Ve("File"),mn=Ve("Blob"),En=Ve("FileList");function Vt(t){return kt.call(t)==="[object Function]"}function vn(t){return Cr(t)&&Vt(t.pipe)}function wn(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||kt.call(t)===e||Vt(t.toString)&&t.toString()===e)}var Tn=Ve("URLSearchParams");function yn(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function bn(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Bt(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Lt(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function At(){var t={};function e(i,a){Je(t[a])&&Je(i)?t[a]=At(t[a],i):Je(i)?t[a]=At({},i):Lt(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)Bt(arguments[r],e);return t}function Sn(t,e,r){return Bt(e,function(i,a){r&&typeof i=="function"?t[a]=cn(i,r):t[a]=i}),t}function _n(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function An(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function Rn(t,e,r){var n,i,a,o={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)a=n[i],o[a]||(e[a]=t[a],o[a]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function In(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function Cn(t){if(!t)return null;var e=t.length;if(Xe(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var xn=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),he={isArray:Lt,isArrayBuffer:Ir,isBuffer:fn,isFormData:wn,isArrayBufferView:ln,isString:pn,isNumber:hn,isObject:Cr,isPlainObject:Je,isUndefined:Xe,isDate:dn,isFile:gn,isBlob:mn,isFunction:Vt,isStream:vn,isURLSearchParams:Tn,isStandardBrowserEnv:bn,forEach:Bt,merge:At,extend:Sn,trim:yn,stripBOM:_n,inherits:An,toFlatObject:Rn,kindOf:Mt,kindOfTest:Ve,endsWith:In,toArray:Cn,isTypedArray:xn,isFileList:En},Fe=he;function Kt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var xr=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Fe.isURLSearchParams(r))i=r.toString();else{var a=[];Fe.forEach(r,function(E,h){E===null||typeof E>"u"||(Fe.isArray(E)?h=h+"[]":E=[E],Fe.forEach(E,function(C){Fe.isDate(C)?C=C.toISOString():Fe.isObject(C)&&(C=JSON.stringify(C)),a.push(Kt(h)+"="+Kt(C))}))}),i=a.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},On=he;function et(){this.handlers=[]}et.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};et.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};et.prototype.forEach=function(e){On.forEach(this.handlers,function(n){n!==null&&e(n)})};var Pn=et,Nn=he,kn=function(e,r){Nn.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},Or=he;function qe(t,e,r,n,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}Or.inherits(qe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Pr=qe.prototype,Nr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){Nr[t]={value:t}});Object.defineProperties(qe,Nr);Object.defineProperty(Pr,"isAxiosError",{value:!0});qe.from=function(t,e,r,n,i,a){var o=Object.create(Pr);return Or.toFlatObject(t,o,function(E){return E!==Error.prototype}),qe.call(o,t.message,e,r,n,i),o.name=t.name,a&&Object.assign(o,a),o};var Ye=qe,kr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Re=he;function Mn(t,e){e=e||new FormData;var r=[];function n(a){return a===null?"":Re.isDate(a)?a.toISOString():Re.isArrayBuffer(a)||Re.isTypedArray(a)?typeof Blob=="function"?new Blob([a]):Buffer.from(a):a}function i(a,o){if(Re.isPlainObject(a)||Re.isArray(a)){if(r.indexOf(a)!==-1)throw Error("Circular reference detected in "+o);r.push(a),Re.forEach(a,function(E,h){if(!Re.isUndefined(E)){var u=o?o+"."+h:h,C;if(E&&!o&&typeof E=="object"){if(Re.endsWith(h,"{}"))E=JSON.stringify(E);else if(Re.endsWith(h,"[]")&&(C=Re.toArray(E))){C.forEach(function(p){!Re.isUndefined(p)&&e.append(u,n(p))});return}}i(E,u)}}),r.pop()}else e.append(o,n(a))}return i(t),e}var Mr=Mn,ot,Yt;function Ln(){if(Yt)return ot;Yt=1;var t=Ye;return ot=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(new t("Request failed with status code "+i.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},ot}var st,Wt;function Vn(){if(Wt)return st;Wt=1;var t=he;return st=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,f,E){var h=[];h.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&h.push("expires="+new Date(a).toGMTString()),t.isString(o)&&h.push("path="+o),t.isString(f)&&h.push("domain="+f),E===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),st}var Bn=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Un=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},Fn=Bn,Dn=Un,Lr=function(e,r){return e&&!Fn(r)?Dn(e,r):r},at,Jt;function jn(){if(Jt)return at;Jt=1;var t=he,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return at=function(n){var i={},a,o,f;return n&&t.forEach(n.split(`
`),function(h){if(f=h.indexOf(":"),a=t.trim(h.substr(0,f)).toLowerCase(),o=t.trim(h.substr(f+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},at}var ut,zt;function Gn(){if(zt)return ut;zt=1;var t=he;return ut=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var f=o;return r&&(n.setAttribute("href",f),f=n.href),n.setAttribute("href",f),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(f){var E=t.isString(f)?a(f):f;return E.protocol===i.protocol&&E.host===i.host}}():function(){return function(){return!0}}(),ut}var ct,Xt;function tt(){if(Xt)return ct;Xt=1;var t=Ye,e=he;function r(n){t.call(this,n??"canceled",t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),ct=r,ct}var ft,Qt;function qn(){return Qt||(Qt=1,ft=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),ft}var lt,Zt;function er(){if(Zt)return lt;Zt=1;var t=he,e=Ln(),r=Vn(),n=xr,i=Lr,a=jn(),o=Gn(),f=kr,E=Ye,h=tt(),u=qn();return lt=function(p){return new Promise(function(A,y){var _=p.data,H=p.headers,L=p.responseType,B;function G(){p.cancelToken&&p.cancelToken.unsubscribe(B),p.signal&&p.signal.removeEventListener("abort",B)}t.isFormData(_)&&t.isStandardBrowserEnv()&&delete H["Content-Type"];var N=new XMLHttpRequest;if(p.auth){var U=p.auth.username||"",j=p.auth.password?unescape(encodeURIComponent(p.auth.password)):"";H.Authorization="Basic "+btoa(U+":"+j)}var Z=i(p.baseURL,p.url);N.open(p.method.toUpperCase(),n(Z,p.params,p.paramsSerializer),!0),N.timeout=p.timeout;function ee(){if(N){var Y="getAllResponseHeaders"in N?a(N.getAllResponseHeaders()):null,z=!L||L==="text"||L==="json"?N.responseText:N.response,te={data:z,status:N.status,statusText:N.statusText,headers:Y,config:p,request:N};e(function(de){A(de),G()},function(de){y(de),G()},te),N=null}}if("onloadend"in N?N.onloadend=ee:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(ee)},N.onabort=function(){N&&(y(new E("Request aborted",E.ECONNABORTED,p,N)),N=null)},N.onerror=function(){y(new E("Network Error",E.ERR_NETWORK,p,N,N)),N=null},N.ontimeout=function(){var z=p.timeout?"timeout of "+p.timeout+"ms exceeded":"timeout exceeded",te=p.transitional||f;p.timeoutErrorMessage&&(z=p.timeoutErrorMessage),y(new E(z,te.clarifyTimeoutError?E.ETIMEDOUT:E.ECONNABORTED,p,N)),N=null},t.isStandardBrowserEnv()){var O=(p.withCredentials||o(Z))&&p.xsrfCookieName?r.read(p.xsrfCookieName):void 0;O&&(H[p.xsrfHeaderName]=O)}"setRequestHeader"in N&&t.forEach(H,function(z,te){typeof _>"u"&&te.toLowerCase()==="content-type"?delete H[te]:N.setRequestHeader(te,z)}),t.isUndefined(p.withCredentials)||(N.withCredentials=!!p.withCredentials),L&&L!=="json"&&(N.responseType=p.responseType),typeof p.onDownloadProgress=="function"&&N.addEventListener("progress",p.onDownloadProgress),typeof p.onUploadProgress=="function"&&N.upload&&N.upload.addEventListener("progress",p.onUploadProgress),(p.cancelToken||p.signal)&&(B=function(Y){N&&(y(!Y||Y&&Y.type?new h:Y),N.abort(),N=null)},p.cancelToken&&p.cancelToken.subscribe(B),p.signal&&(p.signal.aborted?B():p.signal.addEventListener("abort",B))),_||(_=null);var ie=u(Z);if(ie&&["http","https","file"].indexOf(ie)===-1){y(new E("Unsupported protocol "+ie+":",E.ERR_BAD_REQUEST,p));return}N.send(_)})},lt}var pt,tr;function Hn(){return tr||(tr=1,pt=null),pt}var ce=he,rr=kn,nr=Ye,$n=kr,Kn=Mr,Yn={"Content-Type":"application/x-www-form-urlencoded"};function ir(t,e){!ce.isUndefined(t)&&ce.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Wn(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=er()),t}function Jn(t,e,r){if(ce.isString(t))try{return(e||JSON.parse)(t),ce.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(t)}var rt={transitional:$n,adapter:Wn(),transformRequest:[function(e,r){if(rr(r,"Accept"),rr(r,"Content-Type"),ce.isFormData(e)||ce.isArrayBuffer(e)||ce.isBuffer(e)||ce.isStream(e)||ce.isFile(e)||ce.isBlob(e))return e;if(ce.isArrayBufferView(e))return e.buffer;if(ce.isURLSearchParams(e))return ir(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=ce.isObject(e),i=r&&r["Content-Type"],a;if((a=ce.isFileList(e))||n&&i==="multipart/form-data"){var o=this.env&&this.env.FormData;return Kn(a?{"files[]":e}:e,o&&new o)}else if(n||i==="application/json")return ir(r,"application/json"),Jn(e);return e}],transformResponse:[function(e){var r=this.transitional||rt.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&ce.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?nr.from(o,nr.ERR_BAD_RESPONSE,this,null,this.response):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hn()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ce.forEach(["delete","get","head"],function(e){rt.headers[e]={}});ce.forEach(["post","put","patch"],function(e){rt.headers[e]=ce.merge(Yn)});var Ut=rt,zn=he,Xn=Ut,Qn=function(e,r,n){var i=this||Xn;return zn.forEach(n,function(o){e=o.call(i,e,r)}),e},ht,or;function Vr(){return or||(or=1,ht=function(e){return!!(e&&e.__CANCEL__)}),ht}var sr=he,dt=Qn,Zn=Vr(),ei=Ut,ti=tt();function gt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ti}var ri=function(e){gt(e),e.headers=e.headers||{},e.data=dt.call(e,e.data,e.headers,e.transformRequest),e.headers=sr.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),sr.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||ei.adapter;return r(e).then(function(i){return gt(e),i.data=dt.call(e,i.data,i.headers,e.transformResponse),i},function(i){return Zn(i)||(gt(e),i&&i.response&&(i.response.data=dt.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},be=he,Br=function(e,r){r=r||{};var n={};function i(u,C){return be.isPlainObject(u)&&be.isPlainObject(C)?be.merge(u,C):be.isPlainObject(C)?be.merge({},C):be.isArray(C)?C.slice():C}function a(u){if(be.isUndefined(r[u])){if(!be.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],r[u])}function o(u){if(!be.isUndefined(r[u]))return i(void 0,r[u])}function f(u){if(be.isUndefined(r[u])){if(!be.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,r[u])}function E(u){if(u in r)return i(e[u],r[u]);if(u in e)return i(void 0,e[u])}var h={url:o,method:o,data:o,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:E};return be.forEach(Object.keys(e).concat(Object.keys(r)),function(C){var p=h[C]||a,R=p(C);be.isUndefined(R)&&p!==E||(n[C]=R)}),n},mt,ar;function Ur(){return ar||(ar=1,mt={version:"0.27.2"}),mt}var ni=Ur().version,ke=Ye,Ft={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Ft[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var ur={};Ft.transitional=function(e,r,n){function i(a,o){return"[Axios v"+ni+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,f){if(e===!1)throw new ke(i(o," has been removed"+(r?" in "+r:"")),ke.ERR_DEPRECATED);return r&&!ur[o]&&(ur[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,f):!0}};function ii(t,e,r){if(typeof t!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],o=e[a];if(o){var f=t[a],E=f===void 0||o(f,a,t);if(E!==!0)throw new ke("option "+a+" must be "+E,ke.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ke("Unknown option "+a,ke.ERR_BAD_OPTION)}}var oi={assertOptions:ii,validators:Ft},Fr=he,si=xr,cr=Pn,fr=ri,nt=Br,ai=Lr,Dr=oi,De=Dr.validators;function He(t){this.defaults=t,this.interceptors={request:new cr,response:new cr}}He.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=nt(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Dr.assertOptions(n,{silentJSONParsing:De.transitional(De.boolean),forcedJSONParsing:De.transitional(De.boolean),clarifyTimeoutError:De.transitional(De.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(r)===!1||(a=a&&R.synchronous,i.unshift(R.fulfilled,R.rejected))});var o=[];this.interceptors.response.forEach(function(R){o.push(R.fulfilled,R.rejected)});var f;if(!a){var E=[fr,void 0];for(Array.prototype.unshift.apply(E,i),E=E.concat(o),f=Promise.resolve(r);E.length;)f=f.then(E.shift(),E.shift());return f}for(var h=r;i.length;){var u=i.shift(),C=i.shift();try{h=u(h)}catch(p){C(p);break}}try{f=fr(h)}catch(p){return Promise.reject(p)}for(;o.length;)f=f.then(o.shift(),o.shift());return f};He.prototype.getUri=function(e){e=nt(this.defaults,e);var r=ai(e.baseURL,e.url);return si(r,e.params,e.paramsSerializer)};Fr.forEach(["delete","get","head","options"],function(e){He.prototype[e]=function(r,n){return this.request(nt(n||{},{method:e,url:r,data:(n||{}).data}))}});Fr.forEach(["post","put","patch"],function(e){function r(n){return function(a,o,f){return this.request(nt(f||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}He.prototype[e]=r(),He.prototype[e+"Form"]=r(!0)});var ui=He,Et,lr;function ci(){if(lr)return Et;lr=1;var t=tt();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){var o,f=i._listeners.length;for(o=0;o<f;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,f=new Promise(function(E){i.subscribe(E),o=E}).then(a);return f.cancel=function(){i.unsubscribe(o)},f},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Et=e,Et}var vt,pr;function fi(){return pr||(pr=1,vt=function(e){return function(n){return e.apply(null,n)}}),vt}var wt,hr;function li(){if(hr)return wt;hr=1;var t=he;return wt=function(r){return t.isObject(r)&&r.isAxiosError===!0},wt}var dr=he,pi=Rr,ze=ui,hi=Br,di=Ut;function jr(t){var e=new ze(t),r=pi(ze.prototype.request,e);return dr.extend(r,ze.prototype,e),dr.extend(r,e),r.create=function(i){return jr(hi(t,i))},r}var ye=jr(di);ye.Axios=ze;ye.CanceledError=tt();ye.CancelToken=ci();ye.isCancel=Vr();ye.VERSION=Ur().version;ye.toFormData=Mr;ye.AxiosError=Ye;ye.Cancel=ye.CanceledError;ye.all=function(e){return Promise.all(e)};ye.spread=fi();ye.isAxiosError=li();Nt.exports=ye;Nt.exports.default=ye;var gi=Nt.exports,mi=gi;const je=wr(mi);var Rt={exports:{}};(function(t,e){(function(r,n){var i="1.0.34",a="",o="?",f="function",E="undefined",h="object",u="string",C="major",p="model",R="name",A="type",y="vendor",_="version",H="architecture",L="console",B="mobile",G="tablet",N="smarttv",U="wearable",j="embedded",Z=350,ee="Amazon",O="Apple",ie="ASUS",Y="BlackBerry",z="Browser",te="Chrome",pe="Edge",de="Firefox",ge="Google",Ie="Huawei",Ce="LG",Se="Microsoft",Be="Motorola",_e="Opera",Me="Samsung",x="Sharp",Ne="Sony",Ue="Xiaomi",Le="Zebra",me="Facebook",Ae="Chromium OS",s="Mac OS",c=function(F,q){var P={};for(var D in F)q[D]&&q[D].length%2===0?P[D]=q[D].concat(F[D]):P[D]=F[D];return P},l=function(F){for(var q={},P=0;P<F.length;P++)q[F[P].toUpperCase()]=F[P];return q},T=function(F,q){return typeof F===u?g(q).indexOf(g(F))!==-1:!1},g=function(F){return F.toLowerCase()},v=function(F){return typeof F===u?F.replace(/[^\d\.]/g,a).split(".")[0]:n},S=function(F,q){if(typeof F===u)return F=F.replace(/^\s\s*/,a),typeof q===E?F:F.substring(0,Z)},d=function(F,q){for(var P=0,D,oe,Ee,k,xe,ae;P<q.length&&!xe;){var Oe=q[P],ve=q[P+1];for(D=oe=0;D<Oe.length&&!xe&&Oe[D];)if(xe=Oe[D++].exec(F),xe)for(Ee=0;Ee<ve.length;Ee++)ae=xe[++oe],k=ve[Ee],typeof k===h&&k.length>0?k.length===2?typeof k[1]==f?this[k[0]]=k[1].call(this,ae):this[k[0]]=k[1]:k.length===3?typeof k[1]===f&&!(k[1].exec&&k[1].test)?this[k[0]]=ae?k[1].call(this,ae,k[2]):n:this[k[0]]=ae?ae.replace(k[1],k[2]):n:k.length===4&&(this[k[0]]=ae?k[3].call(this,ae.replace(k[1],k[2])):n):this[k]=ae||n;P+=2}},m=function(F,q){for(var P in q)if(typeof q[P]===h&&q[P].length>0){for(var D=0;D<q[P].length;D++)if(T(q[P][D],F))return P===o?n:P}else if(T(q[P],F))return P===o?n:P;return F},b={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},w={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},I={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[_,[R,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[_,[R,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[R,_],[/opios[\/ ]+([\w\.]+)/i],[_,[R,_e+" Mini"]],[/\bopr\/([\w\.]+)/i],[_,[R,_e]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[R,_],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[_,[R,"UC"+z]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[_,[R,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[_,[R,"WeChat"]],[/konqueror\/([\w\.]+)/i],[_,[R,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[_,[R,"IE"]],[/yabrowser\/([\w\.]+)/i],[_,[R,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[R,/(.+)/,"$1 Secure "+z],_],[/\bfocus\/([\w\.]+)/i],[_,[R,de+" Focus"]],[/\bopt\/([\w\.]+)/i],[_,[R,_e+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[_,[R,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[_,[R,"Dolphin"]],[/coast\/([\w\.]+)/i],[_,[R,_e+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[_,[R,"MIUI "+z]],[/fxios\/([-\w\.]+)/i],[_,[R,de]],[/\bqihu|(qi?ho?o?|360)browser/i],[[R,"360 "+z]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[R,/(.+)/,"$1 "+z],_],[/(comodo_dragon)\/([\w\.]+)/i],[[R,/_/g," "],_],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[R,_],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[R],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[R,me],_],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[R,_],[/\bgsa\/([\w\.]+) .*safari\//i],[_,[R,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[_,[R,te+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[R,te+" WebView"],_],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[_,[R,"Android "+z]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[R,_],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[_,[R,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[_,R],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[R,[_,m,b]],[/(webkit|khtml)\/([\w\.]+)/i],[R,_],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[R,"Netscape"],_],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[_,[R,de+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[R,_],[/(cobalt)\/([\w\.]+)/i],[R,[_,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[H,"amd64"]],[/(ia32(?=;))/i],[[H,g]],[/((?:i[346]|x)86)[;\)]/i],[[H,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[H,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[H,"armhf"]],[/windows (ce|mobile); ppc;/i],[[H,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[H,/ower/,a,g]],[/(sun4\w)[;\)]/i],[[H,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[H,g]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[y,Me],[A,G]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[y,Me],[A,B]],[/\((ip(?:hone|od)[\w ]*);/i],[p,[y,O],[A,B]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[y,O],[A,G]],[/(macintosh);/i],[p,[y,O]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[y,x],[A,B]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[y,Ie],[A,G]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[p,[y,Ie],[A,B]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[y,Ue],[A,B]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[y,Ue],[A,G]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[y,"OPPO"],[A,B]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[y,"Vivo"],[A,B]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[y,"Realme"],[A,B]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[y,Be],[A,B]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[y,Be],[A,G]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[y,Ce],[A,G]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[y,Ce],[A,B]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[y,"Lenovo"],[A,G]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[y,"Nokia"],[A,B]],[/(pixel c)\b/i],[p,[y,ge],[A,G]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[y,ge],[A,B]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[y,Ne],[A,B]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[y,Ne],[A,G]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[y,"OnePlus"],[A,B]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[y,ee],[A,G]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[y,ee],[A,B]],[/(playbook);[-\w\),; ]+(rim)/i],[p,y,[A,G]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[y,Y],[A,B]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[y,ie],[A,G]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[y,ie],[A,B]],[/(nexus 9)/i],[p,[y,"HTC"],[A,G]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[y,[p,/_/g," "],[A,B]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[y,"Acer"],[A,G]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[y,"Meizu"],[A,B]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[y,p,[A,B]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,p,[A,G]],[/(surface duo)/i],[p,[y,Se],[A,G]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[y,"Fairphone"],[A,B]],[/(u304aa)/i],[p,[y,"AT&T"],[A,B]],[/\bsie-(\w*)/i],[p,[y,"Siemens"],[A,B]],[/\b(rct\w+) b/i],[p,[y,"RCA"],[A,G]],[/\b(venue[\d ]{2,7}) b/i],[p,[y,"Dell"],[A,G]],[/\b(q(?:mv|ta)\w+) b/i],[p,[y,"Verizon"],[A,G]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[y,"Barnes & Noble"],[A,G]],[/\b(tm\d{3}\w+) b/i],[p,[y,"NuVision"],[A,G]],[/\b(k88) b/i],[p,[y,"ZTE"],[A,G]],[/\b(nx\d{3}j) b/i],[p,[y,"ZTE"],[A,B]],[/\b(gen\d{3}) b.+49h/i],[p,[y,"Swiss"],[A,B]],[/\b(zur\d{3}) b/i],[p,[y,"Swiss"],[A,G]],[/\b((zeki)?tb.*\b) b/i],[p,[y,"Zeki"],[A,G]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],p,[A,G]],[/\b(ns-?\w{0,9}) b/i],[p,[y,"Insignia"],[A,G]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[y,"NextBook"],[A,G]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],p,[A,B]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],p,[A,B]],[/\b(ph-1) /i],[p,[y,"Essential"],[A,B]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[y,"Envizen"],[A,G]],[/\b(trio[-\w\. ]+) b/i],[p,[y,"MachSpeed"],[A,G]],[/\btu_(1491) b/i],[p,[y,"Rotor"],[A,G]],[/(shield[\w ]+) b/i],[p,[y,"Nvidia"],[A,G]],[/(sprint) (\w+)/i],[y,p,[A,B]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[y,Se],[A,B]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[y,Le],[A,G]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[y,Le],[A,B]],[/smart-tv.+(samsung)/i],[y,[A,N]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[y,Me],[A,N]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,Ce],[A,N]],[/(apple) ?tv/i],[y,[p,O+" TV"],[A,N]],[/crkey/i],[[p,te+"cast"],[y,ge],[A,N]],[/droid.+aft(\w)( bui|\))/i],[p,[y,ee],[A,N]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[p,[y,x],[A,N]],[/(bravia[\w ]+)( bui|\))/i],[p,[y,Ne],[A,N]],[/(mitv-\w{5}) bui/i],[p,[y,Ue],[A,N]],[/Hbbtv.*(technisat) (.*);/i],[y,p,[A,N]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[y,S],[p,S],[A,N]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[A,N]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,p,[A,L]],[/droid.+; (shield) bui/i],[p,[y,"Nvidia"],[A,L]],[/(playstation [345portablevi]+)/i],[p,[y,Ne],[A,L]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[y,Se],[A,L]],[/((pebble))app/i],[y,p,[A,U]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[p,[y,O],[A,U]],[/droid.+; (glass) \d/i],[p,[y,ge],[A,U]],[/droid.+; (wt63?0{2,3})\)/i],[p,[y,Le],[A,U]],[/(quest( 2| pro)?)/i],[p,[y,me],[A,U]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[A,j]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[A,B]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[A,G]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[A,G]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[A,B]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[_,[R,pe+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[_,[R,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[R,_],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[_,R]],os:[[/microsoft (windows) (vista|xp)/i],[R,_],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[R,[_,m,w]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[R,"Windows"],[_,m,w]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[_,/_/g,"."],[R,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[R,s],[_,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[_,R],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[R,_],[/\(bb(10);/i],[_,[R,Y]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[_,[R,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[_,[R,de+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[_,[R,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[_,[R,"watchOS"]],[/crkey\/([\d\.]+)/i],[_,[R,te+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[R,Ae],_],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[R,_],[/(sunos) ?([\w\.\d]*)/i],[[R,"Solaris"],_],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[R,_]]},M=function(F,q){if(typeof F===h&&(q=F,F=n),!(this instanceof M))return new M(F,q).getResult();var P=typeof r!==E&&r.navigator?r.navigator:n,D=F||(P&&P.userAgent?P.userAgent:a),oe=P&&P.userAgentData?P.userAgentData:n,Ee=q?c(I,q):I;return this.getBrowser=function(){var k={};return k[R]=n,k[_]=n,d.call(k,D,Ee.browser),k[C]=v(k[_]),P&&P.brave&&typeof P.brave.isBrave==f&&(k[R]="Brave"),k},this.getCPU=function(){var k={};return k[H]=n,d.call(k,D,Ee.cpu),k},this.getDevice=function(){var k={};return k[y]=n,k[p]=n,k[A]=n,d.call(k,D,Ee.device),!k[A]&&oe&&oe.mobile&&(k[A]=B),k[p]=="Macintosh"&&P&&typeof P.standalone!==E&&P.maxTouchPoints&&P.maxTouchPoints>2&&(k[p]="iPad",k[A]=G),k},this.getEngine=function(){var k={};return k[R]=n,k[_]=n,d.call(k,D,Ee.engine),k},this.getOS=function(){var k={};return k[R]=n,k[_]=n,d.call(k,D,Ee.os),!k[R]&&oe&&oe.platform!="Unknown"&&(k[R]=oe.platform.replace(/chrome os/i,Ae).replace(/macos/i,s)),k},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return D},this.setUA=function(k){return D=typeof k===u&&k.length>Z?S(k,Z):k,this},this.setUA(D),this};M.VERSION=i,M.BROWSER=l([R,_,C]),M.CPU=l([H]),M.DEVICE=l([p,y,A,L,B,N,G,U,j]),M.ENGINE=M.OS=l([R,_]),t.exports&&(e=t.exports=M),e.UAParser=M;var V=typeof r!==E&&(r.jQuery||r.Zepto);if(V&&!V.ua){var J=new M;V.ua=J.getResult(),V.ua.get=function(){return J.getUA()},V.ua.set=function(F){J.setUA(F);var q=J.getResult();for(var P in q)V.ua[P]=q[P]}}})(typeof window=="object"?window:vr)})(Rt,Rt.exports);var gr=Rt.exports;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gr=function(t,e){return(Gr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};function Dt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Gr(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Ei(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(h){try{E(n.next(h))}catch(u){a(u)}}function f(h){try{E(n.throw(h))}catch(u){a(u)}}function E(h){var u;h.done?i(h.value):(u=h.value,u instanceof r?u:new r(function(C){C(u)})).then(o,f)}E((n=n.apply(t,[])).next())})}function vi(t,e){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function f(E){return function(h){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(C){u=[6,C],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([E,h])}}}var wi=function(t){function e(r){var n=t.call(this)||this;return n.CancelToken=void 0,je.defaults.timeout=7e4,n.CancelToken=je.CancelToken,r==null&&r==null||(je.defaults.adapter=r),n}return Dt(e,t),e.prototype.getAxiosIns=function(){return je},e.prototype.sendRequest=function(r,n,i,a,o){return Ei(this,void 0,void 0,function(){var f,E;return vi(this,function(h){switch(h.label){case 0:return this.checkParam(n)?(f={url:n,method:r,transformResponse:o==null?void 0:o.transformResponse,headers:a,timeout:o==null?void 0:o.timeout,responseType:o==null?void 0:o.responseType,onUploadProgress:o==null?void 0:o.onUploadProgress,onDownloadProgress:o==null?void 0:o.onDownloadProgress,validateStatus:o==null?void 0:o.validateStatus,cancelToken:o==null?void 0:o.cancelToken},r!="PUT"&&r!="POST"||(f.data=i),r!="GET"&&r!="DELETE"||(f.params=i),o&&o.throwOriginException?[2,je.request(f)]:[4,je.request(f).catch(function(u){return Promise.reject(new $(W.NETWORK_REQUEST_ERROR,u,"network"))})]):[2,Promise.reject(new $(W.NETWORK_REQUEST_ERROR,{message:"url is illegal"},"network"))];case 1:return E=h.sent(),[2,Promise.resolve(E)]}})})},e}(function(){function t(){this.CancelToken=void 0}return t.prototype.post=function(e,r,n,i){return this.sendRequest("POST",e,r,n,i)},t.prototype.get=function(e,r,n,i){return this.sendRequest("GET",e,r,n,i)},t.prototype.delete=function(e,r,n,i){return this.sendRequest("DELETE",e,r,n,i)},t.prototype.put=function(e,r,n,i){return this.sendRequest("PUT",e,r,n,i)},t.prototype.checkParam=function(e){return!(!e||e.match(/\s/g)||!e.match(/^(ht)tp(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?/))},t}()),Ti=function(t){function e(r){var n=t.call(this)||this;return n.logger=Pe.createLogger("AGCPlatformInfoService"),n.instance=r||X.instance(),n}return Dt(e,t),e.prototype.getPlatform=function(){return"JS-SDK"},e.prototype.getAppVersion=function(){return this.instance.getAppVersion()},e.prototype.getLanguage=function(){var r;return(r=navigator.languages&&navigator.languages[0]?navigator.languages[0]:navigator.language).toLowerCase().length>2?r.toLowerCase().substr(0,2):""},e.prototype.getSystemInfo=function(){var r="",n="";try{var i=navigator.userAgent,a=new gr.UAParser;a.setUA(i);var o=a.getResult();r=o.os.name,n=o.os.version}catch{this.logger.warn("get system info failed")}return r==="Mac OS"&&(r="Macintosh"),{name:r,version:n}},e.prototype.getBrowsersInfo=function(){var r="",n="";try{var i=navigator.userAgent,a=new gr.UAParser;a.setUA(i);var o=a.getResult();r=o.browser.name,n=o.browser.version}catch{this.logger.warn("get browser info failed")}return{name:r,version:n}},e}(function(){function t(){}return t.prototype.getPlatform=function(){return""},t.prototype.getPlatformVersion=function(){return""},t.prototype.getPackageName=function(){return""},t.prototype.getAppVersion=function(){return""},t.prototype.getLanguage=function(){return""},t.prototype.getScript=function(){return""},t.prototype.getCountry=function(){return""},t.prototype.getSystemInfo=function(){return{name:"",version:""}},t.prototype.getBrowsersInfo=function(){return{name:"",version:""}},t}()),yi=function(t){function e(){var r=t.call(this)||this;if(r.WebSocketImpl="MozWebSocket"in window?MozWebSocket:WebSocket,!r.WebSocketImpl)throw new $(W.WEBSOCKET_NOT_SUPPORT,{message:"Sorry, your browser does not support WebSockets."},"network");return r}return Dt(e,t),e.prototype.connect=function(r,n,i){if(this.websocket&&this.websocket.readyState!=3&&(this.websocket.close(),this.websocket=null),this.websocket=new this.WebSocketImpl(r,i),!this.websocket)throw new $(W.WEBSOCKET_ERROR,{message:"webSocket create fail"},"network");return Promise.resolve()},e}(function(){function t(){this.logger=Pe.createLogger("AGCWebSocketService")}return t.prototype.getReadyState=function(){return this.websocket?Number(this.websocket.readyState):null},t.prototype.send=function(e,r,n){try{if(this.websocket){if(this.websocket.send(e),r)return r()}else if(n)return n()}catch(i){if(this.logger.error(i),n)return n()}},t.prototype.close=function(e,r,n,i){try{if(this.websocket){if(this.websocket.close(e,r),n)return n()}else if(i)return i()}catch(a){if(this.logger.error(a),i)return i()}},t.prototype.onOpen=function(e){if(!this.websocket)throw new $(W.WEBSOCKET_ERROR,{message:"webSocket connect fail"},"network");this.websocket.onopen=e},t.prototype.onMessage=function(e){if(!this.websocket)throw new $(W.WEBSOCKET_ERROR,{message:"webSocket connect fail"},"network");this.websocket.onmessage=function(r){e&&e(r.data)}},t.prototype.onClose=function(e){if(!this.websocket)throw new $(W.WEBSOCKET_ERROR,{message:"webSocket connect fail"},"network");this.websocket.onclose=function(r){e&&e(r.code,r.reason,r.wasClean)}},t.prototype.onError=function(e){if(!this.websocket)throw new $(W.WEBSOCKET_ERROR,{message:"webSocket connect fail"},"network");this.websocket.onerror=function(r){e&&e(r)}},t}()),Tt=X;Tt.registerInternalService({name:"AGCNetworkService",serviceFactory:function(t){return new wi}}),Tt.registerInternalService({name:"AGCWebSocketService",serviceFactory:function(t){return new yi}}),Tt.registerInternalService({name:"AGCPlatformInfoService",serviceFactory:function(t){return new Ti(t)}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qr=function(t,e){return(qr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};function yt(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(h){try{E(n.next(h))}catch(u){a(u)}}function f(h){try{E(n.throw(h))}catch(u){a(u)}}function E(h){var u;h.done?i(h.value):(u=h.value,u instanceof r?u:new r(function(C){C(u)})).then(o,f)}E((n=n.apply(t,[])).next())})}function bt(t,e){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function f(E){return function(h){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(C){u=[6,C],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([E,h])}}}var St=function(){function t(){this.TWO_MINUTES_EARLY=12e4,this.ONE_HOUR=36e5,this.expiration=0,this.tokenString="",this.issuedAt="0",this.notBefore="0",this.lastRefreshTime=0}return t.prototype.constructFromJson=function(e){this.expiration=e.expiration,this.issuedAt=e.issuedAt,this.tokenString=e.tokenString,this.notBefore=e.notBefore,this.lastRefreshTime=e.lastRefreshTime},t.prototype.isValid=function(){var e=new Date().getTime(),r=this.lastRefreshTime+1e3*this.expiration-this.TWO_MINUTES_EARLY;return this.tokenString!=null&&e<=r},t.prototype.allowRefresh=function(){return new Date().getTime()-this.lastRefreshTime>this.ONE_HOUR},t}(),bi=function(t){function e(r){var n=t.call(this,r)||this;return n.REQUEST_URL="/agc/apigw/oauth2/v1/token",n.useJwt=0,n}return function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=r}qr(r,n),r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}(e,t),e.prototype.getBody=function(){return{grant_type:"client_credentials",client_id:this.getHeaderClientId(),client_secret:this.getClientSecret(),useJwt:this.getUseJwt()}},e.prototype.getUrl=function(){return this.getAgcgwUrl()+this.REQUEST_URL},e.prototype.setUseJwt=function(r){this.useJwt=r},e.prototype.getUseJwt=function(){return this.useJwt},e}(function(){function t(e){this.sdkPlatform="",this.sdkPlatformVersion="",this.sdkType="JS",this.packageName="",this.appVersion="",this.headerProductId="",this.headerAppId="",this.headerClientId="",this.clientSecret="",this.agcgwUrl="",this.agcgwBackUrl="",this.agcConfig=null,this.instance=null,this.sdkServiceName="agconnect-credential",this.sdkVersion="1.5.1",this.setAGCInstance(e)}return t.prototype.setAGCInstance=function(e){if(!e)throw new $(W.AGC_INNER_ERROR,{message:"set AGCInstance using null or undefined object"},"CredentialsService");this.instance=e,this.agcConfig=null},t.prototype.getHeaderClientId=function(){return this.initConfig()?this.headerClientId:""},t.prototype.getClientSecret=function(){return this.initConfig()?this.clientSecret:""},t.prototype.getAgcgwUrl=function(){return this.initConfig()?this.agcgwUrl:""},t.prototype.getHeader=function(){if(!this.initConfig())return"";var e=this.instance.getService("AGCPlatformInfoService");return e&&(this.sdkPlatform=e.getPlatform(),this.sdkPlatformVersion=e.getPlatformVersion(),this.packageName=e.getPackageName(),this.appVersion=e.getAppVersion()),{sdkVersion:this.sdkVersion,sdkPlatform:this.sdkPlatform,sdkServiceName:this.sdkServiceName,sdkPlatformVersion:this.sdkPlatformVersion,sdkType:this.sdkType,packageName:this.packageName,appVersion:this.appVersion,app_id:this.headerAppId,client_id:this.headerClientId,productId:this.headerProductId,"Content-Type":"application/json;charset=UTF-8"}},t.prototype.initConfig=function(){if(!this.instance)throw new $(W.AGC_INNER_ERROR,{message:"set AGCInstance using null or undefined object"},"CredentialsService");return this.agcConfig==null&&(this.agcConfig=this.instance.config(),this.headerProductId=this.agcConfig.client.product_id,this.headerClientId=this.agcConfig.client.client_id,this.headerAppId=this.agcConfig.client.app_id,this.clientSecret=this.agcConfig.client.client_secret,this.agcgwUrl=this.instance.getGwUrl(),this.agcgwBackUrl=this.instance.getGwBackUrl()),!0},t}()),mr=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.getStorage=function(e){var r=e.getService("AGCStorageService");if(r!=null)return r.getStorageInstance(0,e.getCryptImp());It.error("Get AGC storage Service failed.")},t}(),It=Pe.createLogger("CredentialsService"),Si=function(){function t(e){this.instance=e||X.instance()}return t.prototype.removeToken=function(){if(this.instance.getCustomCredentialsProvider())return Promise.resolve();var e=this.getCredentialStoreKey(),r=mr.getInstance().getStorage(this.instance);return r?r.remove(e).catch(function(n){return n instanceof $?Promise.reject(n):Promise.reject(new $(W.REMOVE_TOKEN_FAILED,n,"CredentialsService"))}):Promise.reject(new $(W.FAIL_TO_GET_STORAGE_SERVICE,null,"CredentialsService"))},t.prototype.getToken=function(e){return yt(this,void 0,void 0,function(){var r,n,i,a,o,f=this;return bt(this,function(E){switch(E.label){case 0:return this.instance.getCustomCredentialsProvider()?(r=new St,[4,this.instance.getCustomCredentialsProvider().getToken(!!e)]):[3,2];case 1:return(n=E.sent())&&n.tokenString&&n.expiration?isNaN(Number(n.expiration))||Number(n.expiration)<=0?(It.error("the customCredentialsProvider getToken must return valid expiration."),[2,Promise.reject(new $(W.GET_TOKEN_FAILED,{message:"the customCredentialsProvider getToken must return valid expiration"},"CredentialsService"))]):(r.tokenString=n.tokenString,r.expiration=n.expiration,r.lastRefreshTime=new Date().getTime(),[2,Promise.resolve(r)]):(It.error("the customCredentialsProvider getToken method must contain return value: tokenString, expiration."),[2,Promise.reject(new $(W.GET_TOKEN_FAILED,{message:"the customCredentialsProvider getToken method must contain return value: tokenString, expiration"},"CredentialsService"))]);case 2:return i=this.getCredentialStoreKey(),(a=mr.getInstance().getStorage(this.instance))?(o=new St,[2,a.get(i).then(function(h){return yt(f,void 0,void 0,function(){var u,C;return bt(this,function(p){switch(p.label){case 0:return h?o.constructFromJson(JSON.parse(h)):o=null,o&&o.isValid()?e&&o.allowRefresh()?[4,this.requestToken()]:[3,3]:[3,4];case 1:return u=p.sent(),[4,a.set(i,JSON.stringify(u))];case 2:return p.sent(),[2,Promise.resolve(u)];case 3:return[2,Promise.resolve(o)];case 4:return[4,this.requestToken()];case 5:return C=p.sent(),[4,a.set(i,JSON.stringify(C))];case 6:return p.sent(),[2,Promise.resolve(C)]}})})}).catch(function(h){return h instanceof $?Promise.reject(h):Promise.reject(new $(W.GET_TOKEN_FAILED,h,"CredentialsService"))})]):[2,Promise.reject(new $(W.FAIL_TO_GET_STORAGE_SERVICE,null,"CredentialsService"))]}})})},t.prototype.getCredentialStoreKey=function(){return this.instance.name()===Pt?"agcClientToken:"+this.instance.config().client.client_id:"agcClientToken_"+this.instance.name()+":"+this.instance.config().client.client_id},t.prototype.requestToken=function(){return yt(this,void 0,void 0,function(){var e,r;return bt(this,function(n){return(e=this.instance.getService("AGCNetworkService"))?((r=new bi(this.instance)).setUseJwt(1),[2,e.post(r.getUrl(),r.getBody(),r.getHeader()).then(function(i){if(i.data.ret&&i.data.ret.code!=0)return Promise.reject(new $({code:i.data.ret.code,message:i.data.ret.msg},null,"CredentialsService"));var a=new St;return a.tokenString=i.data.access_token,a.expiration=i.data.expires_in,a.lastRefreshTime=new Date().getTime(),Promise.resolve(a)})]):[2,Promise.reject(new $(W.FAIL_TO_GET_NETWORK_SERVICE,null,"CredentialsService"))]})})},t}();X.registerInternalService({name:"CredentialsService",serviceFactory:function(t){return new Si(t)}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function $e(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(h){try{E(n.next(h))}catch(u){a(u)}}function f(h){try{E(n.throw(h))}catch(u){a(u)}}function E(h){var u;h.done?i(h.value):(u=h.value,u instanceof r?u:new r(function(C){C(u)})).then(o,f)}E((n=n.apply(t,[])).next())})}function Ke(t,e){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function f(E){return function(h){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(C){u=[6,C],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([E,h])}}}var Hr=function(){function t(){this.experimentId=void 0,this.variantId=void 0,this.startTime=void 0,this.triggerEventId=void 0,this.isTriggerEventReport=!1}return t.fromMap=function(e){if(!e)throw fe.error("experiment contains undefined item"),new $(W.ABTEST_REPLACE_EXPERIMENTS_ERROR,{message:"experiment contains undefined item"},"abtest");if(!e.has(t.EXPERIMENT_ID_KEY))throw fe.error("experiment not exist experimentId key"),new $(W.ABTEST_REPLACE_EXPERIMENTS_ERROR,{message:"experiment not exist experimentId key"},"abtest");if(!e.has(t.VARIANT_ID_KEY))throw fe.error("experiment not exist variantId key"),new $(W.ABTEST_REPLACE_EXPERIMENTS_ERROR,{message:"experiment not exist variantId key"},"abtest");if(!e.has(t.EXPERIMENT_START_TIME_KEY))throw fe.error("experiment not exist startTime key"),new $(W.ABTEST_REPLACE_EXPERIMENTS_ERROR,{message:"experiment not exist startTime key"},"abtest");if(isNaN(Number(e.get(t.EXPERIMENT_START_TIME_KEY))))throw fe.error("experiment startTime number format error"),new $(W.ABTEST_REPLACE_EXPERIMENTS_ERROR,{message:"experiment startTime number format error"},"abtest");var r=new t;return r.experimentId=e.get(t.EXPERIMENT_ID_KEY),r.variantId=e.get(t.VARIANT_ID_KEY),r.startTime=e.get(t.EXPERIMENT_START_TIME_KEY),r.triggerEventId=e.get(t.TRIGGER_EVENT_KEY),r.isTriggerEventReport=!1,r},t.fromJson=function(e){if(!e)throw fe.error("experiment contains undefined item"),new $(W.ABTEST_LOAD_EXPERIMENTS_ERROR,{message:"experiment contains undefined item"},"abtest");if(e[t.EXPERIMENT_ID_KEY]===void 0||e[t.EXPERIMENT_ID_KEY]===null)throw fe.error("experiment not exist experimentId key"),new $(W.ABTEST_LOAD_EXPERIMENTS_ERROR,{message:"experiment not exist experimentId key"},"abtest");if(e[t.VARIANT_ID_KEY]===void 0||e[t.VARIANT_ID_KEY]===null)throw fe.error("experiment not exist variantId key"),new $(W.ABTEST_LOAD_EXPERIMENTS_ERROR,{message:"experiment not exist variantId key"},"abtest");if(e[t.EXPERIMENT_START_TIME_KEY]===void 0||e[t.EXPERIMENT_START_TIME_KEY]===null)throw fe.error("experiment not exist startTime key"),new $(W.ABTEST_LOAD_EXPERIMENTS_ERROR,{message:"experiment not exist startTime key"},"abtest");var r=new t;return r.experimentId=e[t.EXPERIMENT_ID_KEY],r.variantId=e[t.VARIANT_ID_KEY],r.startTime=e[t.EXPERIMENT_START_TIME_KEY],r.triggerEventId=e[t.TRIGGER_EVENT_KEY],e[t.TRIGGER_EVENT_REPORT_KEY]===!0&&(r.isTriggerEventReport=!0),r},t.EXPERIMENT_ID_KEY="experimentId",t.VARIANT_ID_KEY="variantId",t.EXPERIMENT_START_TIME_KEY="startTime",t.TRIGGER_EVENT_KEY="triggerEventId",t.TRIGGER_EVENT_REPORT_KEY="isTriggerEventReport",t}(),Te=function(){function t(){this.experimentMap=new Map}return t.loadExperiments=function(){return $e(this,void 0,void 0,function(){var e,r;return Ke(this,function(n){switch(n.label){case 0:return(e=t.getStorage())?[4,e.get(t.getStorageKey()).catch(function(i){return Promise.reject(new $(W.ABTEST_LOAD_EXPERIMENTS_ERROR,i,"abtest"))})]:[2,Promise.reject(new $(W.ABTEST_LOAD_EXPERIMENTS_ERROR,{message:"get agcStorage failed"},"abtest"))];case 1:return r=n.sent(),t.getExperimentsFromJson(r),[2,Promise.resolve()]}})})},t.getExperimentsFromJson=function(e){try{if(e)for(var r=JSON.parse(e),n=Object.keys(r),i=0,a=n;i<a.length;i++){var o=a[i],f=new Array;if(r[o])for(var E=0,h=r[o];E<h.length;E++){var u=h[E];f.push(Hr.fromJson(u))}t.instance.experimentMap.set(o,f)}}catch(C){throw new $(W.ABTEST_LOAD_EXPERIMENTS_ERROR,C,"abtest")}},t.saveExperiments=function(){return $e(this,void 0,void 0,function(){var e,r;return Ke(this,function(n){switch(n.label){case 0:return(e=t.getStorage())?(r={},t.instance.experimentMap.forEach(function(i,a){r[a]=i}),[4,e.set(t.getStorageKey(),JSON.stringify(r)).catch(function(i){return Promise.reject(new $(W.ABTEST_SAVE_EXPERIMENTS_ERROR,i,"abtest"))})]):[2,Promise.reject(new $(W.ABTEST_SAVE_EXPERIMENTS_ERROR,{message:"get agcStorage failed"},"abtest"))];case 1:return n.sent(),[2,Promise.resolve()]}})})},t.addExperiment=function(e,r){var n=t.instance.experimentMap.get(r);n||(n=new Array),n.push(e),t.instance.experimentMap.set(r,n)},t.getAllService=function(){var e=new Set;return t.instance.experimentMap.forEach(function(r,n){e.add(n)}),e},t.getExperiment=function(e){var r=t.instance.experimentMap.get(e);return r||new Array},t.removeExperiment=function(e){e&&t.instance.experimentMap.forEach(function(r,n){for(var i=t.instance.experimentMap.get(n),a=0;i&&a<i.length;a++)if(i[a].experimentId===e.experimentId){i.splice(a,1),t.instance.experimentMap.set(n,i);break}})},t.removeExperimentsBykey=function(e){return!!e&&t.instance.experimentMap.delete(e)},t.getStorageKey=function(){return"experiments:"+X.instance().config().client.client_id},t.getStorage=function(){var e=X.instance().getService("AGCStorageService");if(e!=null)return e.getStorageInstance(Number(t.persistence),X.instance().getCryptImp());fe.error("Get AGC storage Service failed.")},t.instance=new t,t.persistence=0,t}(),fe=Pe.createLogger("ABTestService"),_i=function(){function t(){this.experimentsLoaded=!1}return t.prototype.getABtestInstance=function(e){return $e(this,void 0,void 0,function(){return Ke(this,function(r){switch(r.label){case 0:return e?t.ABT_INSTANCE.has(e)?[3,2]:(t.ABT_INSTANCE.set(e,new Ai(e)),[4,Te.loadExperiments()]):[2,void 0];case 1:r.sent(),r.label=2;case 2:return[2,t.ABT_INSTANCE.get(e)]}})})},t.prototype.onEvent=function(e,r,n){return $e(this,void 0,void 0,function(){var i;return Ke(this,function(a){switch(a.label){case 0:return fe.log("abtest ha event :"+e),X.hasOwnProperty("analytics")?this.experimentsLoaded?[3,2]:[4,Te.loadExperiments()]:(fe.error("The Analytics SDK is not available."),[2,Promise.resolve()]);case 1:a.sent(),this.experimentsLoaded=!0,a.label=2;case 2:return i=!1,Te.getAllService().forEach(function(o){for(var f=0,E=Te.getExperiment(o);f<E.length;f++){var h=E[f];if(h.triggerEventId&&!h.isTriggerEventReport&&h.triggerEventId===e){var u={};u.$ABTaskId=h.experimentId,u.$ABVarId=h.variantId,u.$ABChannel=o,fe.log("report trigger ab test event"),X.analytics().onEvent("$JoinABTask",u),h.isTriggerEventReport=!0,i=!0}}}),i?[4,Te.saveExperiments()]:[3,4];case 3:a.sent(),a.label=4;case 4:return[2,Promise.resolve()]}})})},t.ABT_INSTANCE=new Map,t}(),Ai=function(){function t(e){this.originService=e}return t.prototype.replaceAllExperiments=function(e){return $e(this,void 0,void 0,function(){var r,n,i,a,o,f,E,h,u,C,p,R,A;return Ke(this,function(y){switch(y.label){case 0:return X.hasOwnProperty("analytics")?e!=null&&e!=null&&Array.isArray(e)?e.length!=0?[3,2]:[4,this.removeAllExperiments()]:(fe.error("The replacementExperiments list is not available."),[2,Promise.reject(new $(W.ABTEST_REPLACE_EXPERIMENTS_ERROR,{message:"the replacementExperiments list is not available"},"abtest"))]):(fe.error("The Analytics SDK is not available."),[2,Promise.resolve()]);case 1:return y.sent(),[2,Promise.resolve()];case 2:for(r=new Array,n=new Set,i=0,a=e;i<a.length;i++)o=a[i],f=Hr.fromMap(o),r.push(f),n.add(f.experimentId);for(E=Te.getExperiment(this.originService),h=new Set,u=0,C=E;u<C.length;u++)p=C[u],h.add(p.experimentId);return R=this.getExperimentsToRemove(E,n),this.removeExperiments(R),A=this.getExperimentsToAdd(r,h),this.addExperiments(A),[4,Te.saveExperiments()];case 3:return y.sent(),[2,Promise.resolve()]}})})},t.prototype.removeAllExperiments=function(){return $e(this,void 0,void 0,function(){return Ke(this,function(e){switch(e.label){case 0:return X.hasOwnProperty("analytics")?(Te.removeExperimentsBykey(this.originService)||fe.error("removeAllExperiments failed."),[4,Te.saveExperiments()]):(fe.error("The Analytics SDK is not available."),[2,Promise.resolve()]);case 1:return e.sent(),[2,Promise.resolve()]}})})},t.prototype.getExperimentsToRemove=function(e,r){for(var n=new Array,i=0,a=e;i<a.length;i++){var o=a[i];r.has(o.experimentId)||n.push(o)}return n},t.prototype.getExperimentsToAdd=function(e,r){for(var n=new Array,i=0,a=e;i<a.length;i++){var o=a[i];r.has(o.experimentId)||n.push(o)}return n},t.prototype.addExperiments=function(e){for(var r=0,n=e;r<n.length;r++){for(var i=n[r];Te.getExperiment(this.originService).length>=t.MaxExperimentCount;)Te.removeExperiment(Te.getExperiment(this.originService)[0]);this.addExperimentToAnalytics(i)}},t.prototype.removeExperiments=function(e){for(var r=0,n=e;r<n.length;r++){var i=n[r];Te.removeExperiment(i)}},t.prototype.addExperimentToAnalytics=function(e){if(!e.triggerEventId||e.triggerEventId.length==0){var r={};r.$ABTaskId=e.experimentId,r.$ABVarId=e.variantId,r.$ABChannel=this.originService,fe.log("report ab test event"),X.analytics().onEvent("$JoinABTask",r),e.isTriggerEventReport=!0}Te.addExperiment(e,this.originService)},t.MaxExperimentCount=25,t}();X.registerInternalService({name:"ABTestService",serviceFactory:function(){return new _i}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $r=function(t,e){return($r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};function jt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}$r(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function re(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(h){try{E(n.next(h))}catch(u){a(u)}}function f(h){try{E(n.throw(h))}catch(u){a(u)}}function E(h){var u;h.done?i(h.value):(u=h.value,u instanceof r?u:new r(function(C){C(u)})).then(o,f)}E((n=n.apply(t,[])).next())})}function ne(t,e){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function f(E){return function(h){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(C){u=[6,C],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([E,h])}}}var K,ue=function(t){function e(r,n){var i=t.call(this,r,n,"remoteconfig")||this;return i.__proto__=e.prototype,i}return jt(e,t),e.constructExcpFromRet=function(r){return new e({code:r.getCode(),message:r.getMsg()})},e}($),le=function(){function t(){}return t.FAIL_TO_GET_STORAGE_SERVICE={code:12e3,message:"get agcStorage service failed"},t.FAIL_TO_DO_SET={code:12001,message:"set value to storage failed"},t.FAIL_TO_DO_GET={code:12002,message:"get value from storage failed"},t.FAIL_TO_DO_REMOVE={code:12003,message:"remove value from storage failed"},t.FAIL_TO_GET_ABTEST_SERVICE={code:12004,message:"get abtest service failed"},t.FETCH_FAILED={code:12005,message:"fetch failed"},t.GET_AAID_FAILED={code:12006,message:"get aaid failed"},t.FAIL_TO_GET_CREDENTIAL_SERVICE={code:12007,message:"get agcCredential service failed"},t.FAIL_TO_GET_NETWORK_SERVICE={code:12008,message:"get agcNetwork service failed"},t.FETCH_THROTTLE_LIMIT={code:203818263,message:"fetch throttled, try again later"},t.FETCH_REQ_TIMEOUT={code:203818264,message:"fetch req timeout"},t.GET_REMOTE_CONFIG_ERROR_ENABLE_RETRY={code:203818262,message:"httpError"},t}();(function(t){t[t.LATEST_SUCCESS_FETCH_RESULT=0]="LATEST_SUCCESS_FETCH_RESULT",t[t.LATEST_SUCCESS_FETCH_TIMESTAMP=1]="LATEST_SUCCESS_FETCH_TIMESTAMP",t[t.LATEST_FETCH_STATE=2]="LATEST_FETCH_STATE",t[t.THROTTLE=3]="THROTTLE",t[t.LATEST_APPLY_FETCH_RESULT=4]="LATEST_APPLY_FETCH_RESULT",t[t.LATEST_DEFAULT_CONFIG=5]="LATEST_DEFAULT_CONFIG",t[t.CUSTOM_ATTRIBUTES=6]="CUSTOM_ATTRIBUTES"})(K||(K={}));var Qe,Q=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.setUserInfoPersistence=function(e){t.persistence=e},t.getUserInfoPersistence=function(){return t.persistence},t.prototype.getStorageKey=function(e){switch(e){case K.LATEST_APPLY_FETCH_RESULT:return"latestApplyFetchResult:"+X.instance().config().client.client_id;case K.LATEST_FETCH_STATE:return"lastFetchState:"+X.instance().config().client.client_id;case K.LATEST_SUCCESS_FETCH_RESULT:return"latestSuccessFetchResult:"+X.instance().config().client.client_id;case K.LATEST_SUCCESS_FETCH_TIMESTAMP:return"latestSuccessFetchTimeStamp:"+X.instance().config().client.client_id;case K.THROTTLE:return"remoteConfigThrottle:"+X.instance().config().client.client_id;case K.LATEST_DEFAULT_CONFIG:return"defaultConfig:"+X.instance().config().client.client_id;case K.CUSTOM_ATTRIBUTES:return"customAttributes:"+X.instance().config().client.client_id;default:return""}},t.prototype.getStorage=function(){var e=X.instance().getService("AGCStorageService");if(e!=null)return e.getStorageInstance(Number(t.getUserInfoPersistence()),Ot.getCryptImp()?Ot.getCryptImp():X.instance().getCryptImp());Ge.error("Get AGC storage Service failed.")},t.prototype.set=function(e,r){return re(this,void 0,void 0,function(){var n;return ne(this,function(i){switch(i.label){case 0:return(n=this.getStorage())==null||n==null?[2,Promise.reject(new ue(le.FAIL_TO_GET_STORAGE_SERVICE))]:[4,n.set(this.getStorageKey(e),JSON.stringify(r)).catch(function(a){return Promise.reject(new ue(le.FAIL_TO_DO_SET,a))})];case 1:return i.sent(),[2,Promise.resolve()]}})})},t.prototype.query=function(e){return re(this,void 0,void 0,function(){var r;return ne(this,function(n){switch(n.label){case 0:return(r=this.getStorage())==null||r==null?[2,Promise.reject(new ue(le.FAIL_TO_GET_STORAGE_SERVICE))]:[4,r.get(this.getStorageKey(e)).then(function(i){return i?Promise.resolve(JSON.parse(i)):Promise.resolve(i)}).catch(function(i){return Promise.reject(new ue(le.FAIL_TO_DO_GET,i))})];case 1:return[2,n.sent()]}})})},t.prototype.remove=function(e){return re(this,void 0,void 0,function(){var r;return ne(this,function(n){switch(n.label){case 0:return(r=this.getStorage())==null||r==null?[2,Promise.reject(new ue(le.FAIL_TO_GET_STORAGE_SERVICE))]:[4,r.remove(this.getStorageKey(e)).catch(function(i){return Promise.reject(new ue(le.FAIL_TO_DO_REMOVE,i))})];case 1:return n.sent(),[2,Promise.resolve()]}})})},t.persistence=0,t}(),Ri=["1","true","t","yes","y","on"],Ct=function(){function t(e,r){this.value="",this.source="static",this.value=e,this.source=r}return t.prototype.getValueAsBoolean=function(){return this.source!=="static"&&Ri.indexOf(this.value.toLowerCase())>=0},t.prototype.getValueAsNumber=function(){if(this.source==="static")return 0;var e=Number(this.value);return isNaN(e)?0:e},t.prototype.getValueAsString=function(){return this.source==="static"?"":this.value},t.prototype.getSource=function(){return this.source},t.prototype.setSource=function(e){this.source=e},t}(),xt=function(){function t(e){this.inputConfigMap=new Map,this.configMap=new Map,this.experiments=new Array,this.source=e}return t.prototype.setConfig=function(e){var r=this;this.inputConfigMap=e,this.configMap.clear(),e&&e.forEach(function(n,i){r.configMap.set(i,new Ct(n.toString(),r.source))})},t.prototype.getValueAsBoolean=function(e){return this.configMap.get(e)!=null&&this.configMap.get(e).getValueAsBoolean()},t.prototype.getValueAsNumber=function(e){return this.configMap.get(e)==null?0:this.configMap.get(e).getValueAsNumber()},t.prototype.getValueAsString=function(e){return this.configMap.get(e)==null?"":this.configMap.get(e).getValueAsString()},t.prototype.getSource=function(){return this.source},t.prototype.getValue=function(e){return this.configMap.get(e)==null?new Ct("","static"):this.configMap.get(e)},t.prototype.containKey=function(e){return this.source==="static"||this.configMap.get(e)!=null},t.prototype.getAll=function(){return this.configMap},t.prototype.getInputConfigMap=function(){return this.inputConfigMap},t}(),Ii=function(){function t(){this.defaultConfigValues=new xt("default"),this.remoteConfigValues=new xt("remote"),this.defaultConfigValueMap=new Map,this.latestSuccessfulFetchTimeMillis=-1,this.latestFetchState="noFetchExecuted"}return t.prototype.setExperiments=function(e){this.remoteConfigValues.experiments=e},t.prototype.setDefaultConfig=function(e){this.defaultConfigValues.setConfig(e),this.defaultConfigValueMap=e},t.prototype.setRemoteConfig=function(e){this.remoteConfigValues.setConfig(e)},t.prototype.getValueAsBoolean=function(e){return this.remoteConfigValues&&this.remoteConfigValues.containKey(e)?this.remoteConfigValues.getValueAsBoolean(e):!(!this.defaultConfigValues||!this.defaultConfigValues.containKey(e))&&this.defaultConfigValues.getValueAsBoolean(e)},t.prototype.getValueAsNumber=function(e){return this.remoteConfigValues&&this.remoteConfigValues.containKey(e)?this.remoteConfigValues.getValueAsNumber(e):this.defaultConfigValues&&this.defaultConfigValues.containKey(e)?this.defaultConfigValues.getValueAsNumber(e):0},t.prototype.getValueAsString=function(e){return this.remoteConfigValues&&this.remoteConfigValues.containKey(e)?this.remoteConfigValues.getValueAsString(e):this.defaultConfigValues&&this.defaultConfigValues.containKey(e)?this.defaultConfigValues.getValueAsString(e):""},t.prototype.getSource=function(e){return this.remoteConfigValues&&this.remoteConfigValues.containKey(e)?"remote":this.defaultConfigValues&&this.defaultConfigValues.containKey(e)?"default":"static"},t.prototype.getValue=function(e){return this.remoteConfigValues&&this.remoteConfigValues.containKey(e)?this.remoteConfigValues.getValue(e):this.defaultConfigValues&&this.defaultConfigValues.containKey(e)?this.defaultConfigValues.getValue(e):new Ct("","static")},t.prototype.getMergedAll=function(){var e=new Map;return this.defaultConfigValues&&this.defaultConfigValues.getAll().forEach(function(r,n){e.set(n,r)}),this.remoteConfigValues&&this.remoteConfigValues.getAll().forEach(function(r,n){e.set(n,r)}),e},t}(),Ci=function(){function t(e,r){this.name=e,this.value=r}return t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.value},t.prototype.setName=function(e){this.name=e},t.prototype.setValue=function(e){this.value=e},t}(),xi=function(){function t(e,r,n,i){this.experimentId=e,this.variantId=r,this.startTime=n,this.triggerEventId=i}return t.prototype.getExperimentId=function(){return this.experimentId},t.prototype.setExperimentId=function(e){this.experimentId=e},t.prototype.getVariantId=function(){return this.variantId},t.prototype.setVariantId=function(e){this.variantId=e},t.prototype.getStartTime=function(){return this.startTime},t.prototype.setStartTime=function(e){this.startTime=e},t.prototype.getTriggerEventId=function(){return this.triggerEventId},t.prototype.setTriggerEventId=function(e){this.triggerEventId=e},t}(),Oi=function(t){function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.configItems=new Array,r.experiments=new Array,r.tag="",r}return jt(e,t),e.prototype.constructResponse=function(r){var n=e.transRes(r);if(n.configItems!=null&&n.configItems!=null)for(var i=0;i<n.configItems.length;i++)this.configItems.push(new Ci(n.configItems[i].name,n.configItems[i].value));if(n.experiments!=null&&n.experiments!=null)for(i=0;i<n.experiments.length;i++)this.experiments.push(new xi(n.experiments[i].experimentId.toString(),n.experiments[i].variantId.toString(),n.experiments[i].startTime,n.experiments[i].triggerEventId));this.tag=n.tag,this.ret.setMsg(n.ret.msg),this.ret.setCode(n.ret.code)},e.transRes=function(r){return rn({storeAsString:!0}).parse(r.data)},e}(Kr),_t=function(){function t(){}return t.clear=function(){return re(this,void 0,void 0,function(){return ne(this,function(e){switch(e.label){case 0:return[4,Q.getInstance().remove(K.THROTTLE)];case 1:return e.sent(),[2]}})})},t.failOccured=function(){return re(this,void 0,void 0,function(){var e;return ne(this,function(r){switch(r.label){case 0:return[4,Q.getInstance().query(K.THROTTLE)];case 1:return(e=r.sent())||(e={failCount:0,requestEnableTime:Date.now()}),e.requestEnableTime=Date.now()+t.getDelayMillis(e.failCount),e.failCount++,[4,Q.getInstance().set(K.THROTTLE,e)];case 2:return r.sent(),[2]}})})},t.doDelay=function(e){return re(this,void 0,void 0,function(){var r,n;return ne(this,function(i){switch(i.label){case 0:return[4,Q.getInstance().query(K.THROTTLE)];case 1:return(r=i.sent())||(r={failCount:0,requestEnableTime:Date.now()}),(n=r.requestEnableTime-Date.now())>0?[2,new Promise(function(a,o){var f=setTimeout(a,n);e.insertObserver(function(){clearTimeout(f),o(new ue(le.FETCH_THROTTLE_LIMIT))})})]:[2,Promise.resolve()]}})})},t.getDelayMillis=function(e){var r=1e3*Math.pow(2,e),n=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+n)},t}();(function(t){t.POST="post",t.GET="get"})(Qe||(Qe={})),Pe.createLogger("remoteConfig");var Pi=function(){function t(){}return t.getConfigWithRetry=function(e,r){return re(this,void 0,void 0,function(){var n;return ne(this,function(i){switch(i.label){case 0:return[4,t.buildRequest(e)];case 1:return i.sent(),n=new Oi,[4,t.getConfigFromRemote(e,n,r)];case 2:return i.sent(),[2,Promise.resolve(n)]}})})},t.getConfigFromRemote=function(e,r,n){return re(this,void 0,void 0,function(){var i=this;return ne(this,function(a){switch(a.label){case 0:return[4,_t.doDelay(n)];case 1:return a.sent(),[4,t.sendRequest(e,Qe.POST,r,n,!0).catch(function(o){return re(i,void 0,void 0,function(){return ne(this,function(f){switch(f.label){case 0:return t.enableRetry(o)?[4,_t.failOccured()]:[3,2];case 1:return f.sent(),[2,t.getConfigFromRemote(e,r,n)];case 2:return[2,Promise.reject(o)]}})})})];case 2:return a.sent(),[4,_t.clear()];case 3:return a.sent(),[2,Promise.resolve()]}})})},t.enableRetry=function(e){return e instanceof ue&&e.code==le.GET_REMOTE_CONFIG_ERROR_ENABLE_RETRY.code},t.getUserProperties=function(){return re(this,void 0,void 0,function(){var e;return ne(this,function(r){switch(r.label){case 0:return X.hasOwnProperty("analytics")?[4,X.analytics().getUserProfiles(!1)]:[3,2];case 1:return e=r.sent(),[2,Promise.resolve(this.parse(e))];case 2:return[2,Promise.resolve(null)]}})})},t.getCustomAttributes=function(){return re(this,void 0,void 0,function(){var e;return ne(this,function(r){switch(r.label){case 0:return[4,Q.getInstance().query(K.CUSTOM_ATTRIBUTES)];case 1:return e=r.sent(),[2,Promise.resolve(this.parse(e))]}})})},t.parse=function(e){if(e){for(var r=new Array,n=Object.keys(e),i=0;n&&i<n.length;i++){var a={};a.key=n[i].toString(),a.value=e[n[i]].toString(),r.push(a)}return r}return null},t.buildRequest=function(e){return re(this,void 0,void 0,function(){var r,n,i,a,o;return ne(this,function(f){switch(f.label){case 0:return(r=X.instance().getService("AGCPlatformInfoService"))&&(e.versionName=r.getAppVersion(),e.language=r.getLanguage(),e.script=r.getScript(),e.country=r.getCountry(),e.platformVersion=r.getPlatformVersion(),e.systemVersion=r.getSystemInfo(),e.browsersVersion=r.getBrowsersInfo()),e.dateTime=Date.now(),n=e,[4,t.getUserProperties()];case 1:return n.userAttributes=f.sent(),i=e,[4,t.getCustomAttributes()];case 2:return i.customAttributes=f.sent(),(a=X.instance().getService("ClientInfoService"))?(o="",[4,a.getAaid().then(function(E){o=E})]):[2,Promise.reject(new ue(le.FAIL_TO_GET_CREDENTIAL_SERVICE))];case 3:return f.sent(),o?(e.aaId=o,[2,Promise.resolve()]):[2,Promise.reject(new ue(le.GET_AAID_FAILED,{message:"The aaid is null."}))]}})})},t.sendRequest=function(e,r,n,i,a,o){return re(this,void 0,void 0,function(){var f,E,h=this;return ne(this,function(u){switch(u.label){case 0:return(f=X.instance().getService("CredentialsService"))?(E=e.getHeader(),[4,t.doNetworkOption(r,e,E,n,i).then(function(C){return Promise.resolve()}).catch(function(C){return re(h,void 0,void 0,function(){return ne(this,function(p){switch(p.label){case 0:return C.response&&C.response.status?C.response.status!==t.HTTP_TOO_MANY_REQUESTS&&C.response.status!==t.HTTP_INTERNAL_ERROR&&C.response.status!==t.HTTP_BAD_GATEWAY&&C.response.status!==t.HTTP_UNAVAILABLE&&C.response.status!==t.HTTP_GATEWAY_TIMEOUT?[3,1]:[2,Promise.reject(new ue(le.GET_REMOTE_CONFIG_ERROR_ENABLE_RETRY))]:[2,Promise.reject(C)];case 1:return C.response.status===t.TOKEN_INVALID&&C.response.data&&C.response.data.ret&&C.response.data.ret.code?C.response.data.ret.code==t.CLIENT_TOKEN_EXPIRED&&a?[4,f.removeToken()]:[3,3]:[3,5];case 2:return p.sent(),n.setRet(new Wr),[2,t.sendRequest(e,r,n,i,!1,!0)];case 3:return[2,Promise.reject(C)];case 4:return[3,6];case 5:return[2,Promise.reject(C)];case 6:return[2]}})})})]):[2,Promise.reject(new ue(le.FAIL_TO_GET_CREDENTIAL_SERVICE))];case 1:return[2,u.sent()]}})})},t.doNetworkOption=function(e,r,n,i,a){return re(this,void 0,void 0,function(){var o,f,E,h;return ne(this,function(u){switch(u.label){case 0:return(o=X.instance().getService("AGCNetworkService"))?e!=Qe.POST?[3,2]:(f={transformResponse:[function(C){return C}]},E=o.post(r.getUrl(),r.getBody(),n,f),h=new Promise(function(C,p){a.insertObserver(function(){p(new ue(le.FETCH_REQ_TIMEOUT))})}),[4,Promise.race([E,h]).then(function(C){return C.status===t.HTTP_OK?(i.constructResponse(C),Promise.resolve()):Promise.reject(C)}).catch(function(C){return Promise.reject(C)})]):[2,Promise.reject(new ue(le.FAIL_TO_GET_NETWORK_SERVICE))];case 1:u.sent(),u.label=2;case 2:return[2,Promise.resolve()]}})})},t.TOKEN_INVALID=401,t.HTTP_TOO_MANY_REQUESTS=429,t.HTTP_INTERNAL_ERROR=500,t.HTTP_BAD_GATEWAY=502,t.HTTP_UNAVAILABLE=503,t.HTTP_GATEWAY_TIMEOUT=504,t.HTTP_OK=200,t.CLIENT_TOKEN_EXPIRED=205524993,t}(),Er=function(){function t(){this.sdkServiceName="",this.sdkVersion="",this.sdkPlatform="",this.sdkPlatformVersion="",this.sdkType="JS",this.packageName="",this.appVersion="",this.headerClientId="",this.authorization="",this.headerProductId="",this.headerAppId="",this.agcgwUrl="",this.agcgwBackUrl="",this.headerApiKey=""}return t.prototype.init=function(){this.sdkServiceName="agconnect-remoteconfig",this.sdkVersion="1.5.1";var e=X.instance().getService("AGCPlatformInfoService");e&&(this.sdkPlatform=e.getPlatform(),this.sdkPlatformVersion=e.getPlatformVersion(),this.packageName=e.getPackageName(),this.appVersion=e.getAppVersion()),this.authorization="";var r=X.instance().config();this.headerProductId=r.client.product_id,this.headerClientId=r.client.client_id,this.headerAppId=r.client.app_id,this.agcgwUrl=this.addHttpToUrl(r.agcgw.url),this.agcgwBackUrl=this.addHttpToUrl(r.agcgw.backurl),this.headerApiKey=r.client.api_key},t.prototype.addHttpToUrl=function(e){return e&&!e.startsWith("https://")?"https://"+e:e},t.SERVER_URL="/agc/apigw/rcs/remote-configuration-service/v2",t}(),Ni=function(t){function e(){var r=t.call(this)||this;return r.URL=Er.SERVER_URL+"/usage/config",r.tag="",r.versionName="",r.language="",r.script="",r.country="",r.dateTime=0,r.aaId="",r.userAttributes=void 0,r.customAttributes=void 0,r.platformVersion="",r.systemVersion={name:"",version:""},r.browsersVersion={name:"",version:""},r}return jt(e,t),e.prototype.getTag=function(){return this.tag},e.prototype.setTag=function(r){this.tag=r},e.prototype.getVersionName=function(){return this.versionName},e.prototype.setVersionName=function(r){this.versionName=r},e.prototype.getLanguage=function(){return this.language},e.prototype.setLanguage=function(r){this.language=r},e.prototype.getScript=function(){return this.script},e.prototype.setScript=function(r){this.script=r},e.prototype.getCountry=function(){return this.country},e.prototype.setCountry=function(r){this.country=r},e.prototype.getaaId=function(){return this.aaId},e.prototype.setaaId=function(r){this.aaId=r},e.prototype.getDateTime=function(){return this.dateTime},e.prototype.setDateTime=function(r){this.dateTime=r},e.prototype.getUserAttributes=function(){return this.userAttributes},e.prototype.setUserAttributes=function(r){this.userAttributes=r},e.prototype.getCustomAttributes=function(){return this.customAttributes},e.prototype.setCustomAttributes=function(r){this.customAttributes=r},e.prototype.getPlatformVersion=function(){return this.platformVersion},e.prototype.setPlatformVersion=function(r){this.platformVersion=r},e.prototype.setSystemVersion=function(r){this.systemVersion=r},e.prototype.getSystemVersion=function(){return this.systemVersion},e.prototype.setBrowsersVersion=function(r){this.browsersVersion=r},e.prototype.getBrowsersVersion=function(){return this.browsersVersion},e.prototype.getBody=function(){return{versionName:this.getVersionName(),language:this.getLanguage(),script:this.getScript(),country:this.getCountry(),dateTime:this.getDateTime(),aaId:this.getaaId(),userAttributes:this.getUserAttributes(),customAttributes:this.getCustomAttributes(),platformVersion:this.getPlatformVersion(),systemVersion:this.getSystemVersion(),browsersVersion:this.getBrowsersVersion()}},e.prototype.getHeader=function(){return{sdkVersion:this.sdkVersion,sdkPlatform:this.sdkPlatform,sdkServiceName:this.sdkServiceName,sdkPlatformVersion:this.sdkPlatformVersion,sdkType:this.sdkType,packageName:this.packageName,appVersion:this.appVersion,appId:this.headerAppId,"x-apik":this.headerApiKey,productId:this.headerProductId,tag:this.getTag(),"Content-Type":"application/json;charset=UTF-8"}},e.prototype.getUrl=function(){return this.agcgwUrl+this.URL},e}(Er),ki=function(){function t(){this.signalObserverList=[]}return t.prototype.insertObserver=function(e){this.signalObserverList.push(e)},t.prototype.triggerSignal=function(){for(var e=0;e<this.signalObserverList.length;e++)this.signalObserverList[e]()},t}(),Ge=Pe.createLogger("remoteConfig"),Ot=function(){function t(){this.configValueCache=new Ii,this.abTesting=void 0,this.fetchReqTimeoutMillis=6e4,this.minFetchIntervalMillis=432e5}return Object.defineProperty(t.prototype,"latestSuccessfulFetchTimeMillis",{get:function(){return this.configValueCache.latestSuccessfulFetchTimeMillis},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"latestFetchState",{get:function(){return this.configValueCache.latestFetchState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultConfigValues",{get:function(){return this.configValueCache.defaultConfigValueMap},enumerable:!1,configurable:!0}),t.prototype.initialized=function(){return re(this,void 0,void 0,function(){var e=this;return ne(this,function(r){switch(r.label){case 0:return[4,Q.getInstance().query(K.LATEST_APPLY_FETCH_RESULT).then(function(n){n&&e.configValueCache.setRemoteConfig(e.ObjToMap(n))})];case 1:return r.sent(),[4,Q.getInstance().query(K.LATEST_DEFAULT_CONFIG).then(function(n){n&&e.configValueCache.setDefaultConfig(e.ObjToMap(n))})];case 2:return r.sent(),[4,Q.getInstance().query(K.LATEST_SUCCESS_FETCH_TIMESTAMP).then(function(n){n&&!isNaN(Number(n))&&(e.configValueCache.latestSuccessfulFetchTimeMillis=Number(n))})];case 3:return r.sent(),[4,Q.getInstance().query(K.LATEST_FETCH_STATE).then(function(n){n&&(e.configValueCache.latestFetchState=n)})];case 4:return r.sent(),Ge.log("remoteconfig initialized ok"),[2]}})})},t.prototype.initAbTesting=function(){return re(this,void 0,void 0,function(){var e,r=this;return ne(this,function(n){switch(n.label){case 0:return this.abTesting?[3,3]:(e=X.instance().getService("ABTestService"))?[3,1]:(Ge.error("get ABTestService failed."),[2,Promise.reject(new ue(le.FAIL_TO_GET_ABTEST_SERVICE))]);case 1:return[4,e.getABtestInstance("REMOTE_CONFIG").then(function(i){r.abTesting=i,Ge.log("remoteconfig AbTesting init ok")}).catch(function(i){return i instanceof $?Promise.reject(i):Promise.reject(new ue(le.FAIL_TO_GET_ABTEST_SERVICE,i))})];case 2:n.sent(),n.label=3;case 3:return[2,Promise.resolve()]}})})},t.prototype.applyDefault=function(e){return re(this,void 0,void 0,function(){return ne(this,function(r){switch(r.label){case 0:return this.configValueCache.setDefaultConfig(e),[4,Q.getInstance().set(K.LATEST_DEFAULT_CONFIG,this.strMapToObj(e))];case 1:return r.sent(),[2,Promise.resolve()]}})})},t.prototype.apply=function(e){return re(this,void 0,void 0,function(){var r,n,i,a,o,f,E;return ne(this,function(h){switch(h.label){case 0:return[4,this.initAbTesting()];case 1:return h.sent(),e?(this.configValueCache.setRemoteConfig(e.getInputConfigMap()),[4,Q.getInstance().set(K.LATEST_APPLY_FETCH_RESULT,this.strMapToObj(e.getInputConfigMap()))]):[3,5];case 2:return h.sent(),e.experiments&&this.abTesting?[4,this.abTesting.replaceAllExperiments(e.experiments)]:[3,4];case 3:h.sent(),h.label=4;case 4:return[2,Promise.resolve(!0)];case 5:return[4,Q.getInstance().query(K.LATEST_SUCCESS_FETCH_RESULT)];case 6:if(!(r=h.sent())||!r.tag)return[2,Promise.resolve(!1)];if(n=new Map,r.configItems&&r.configItems.length!=0)for(a=0;a<r.configItems.length;a++)n.set(r.configItems[a].name,r.configItems[a].value);return this.configValueCache.setRemoteConfig(n),[4,Q.getInstance().set(K.LATEST_APPLY_FETCH_RESULT,this.strMapToObj(n))];case 7:if(h.sent(),i=void 0,r.experiments)for(i=new Array,a=0;a<r.experiments.length;a++){for(o=new Map,f=Object.keys(r.experiments[a]),E=0;f&&E<f.length;E++)o.set(f[E],r.experiments[a][f[E]]);i.push(o)}return i&&this.abTesting?[4,this.abTesting.replaceAllExperiments(i)]:[3,9];case 8:h.sent(),h.label=9;case 9:return[2,Promise.resolve(!0)]}})})},t.prototype.fetch=function(){return re(this,void 0,void 0,function(){var e,r,n,i,a,o,f=this;return ne(this,function(E){switch(E.label){case 0:return e=new ki,r=!isNaN(this.fetchReqTimeoutMillis)&&this.fetchReqTimeoutMillis>0?this.fetchReqTimeoutMillis:6e4,setTimeout(function(){return re(f,void 0,void 0,function(){return ne(this,function(h){return e.triggerSignal(),[2]})})},r),[4,Promise.all([Q.getInstance().query(K.LATEST_SUCCESS_FETCH_TIMESTAMP),Q.getInstance().query(K.LATEST_SUCCESS_FETCH_RESULT)]).then(function(h){n=h[0],i=h[1]})];case 1:return E.sent(),a=isNaN(this.minFetchIntervalMillis)?432e5:this.minFetchIntervalMillis,i&&n&&Date.now()-n<=a?(this.configValueCache.latestFetchState="fetchSucceed",[4,Q.getInstance().set(K.LATEST_FETCH_STATE,"fetchSucceed")]):[3,3];case 2:return E.sent(),[2,Promise.resolve()];case 3:return o=null,(o=new Ni).init(),o.setTag(i?i.tag:""),[4,Pi.getConfigWithRetry(o,e).then(function(h){return re(f,void 0,void 0,function(){return ne(this,function(u){switch(u.label){case 0:return h.ret.getCode()!=0?[3,4]:(this.configValueCache.latestSuccessfulFetchTimeMillis=Date.now(),[4,Q.getInstance().set(K.LATEST_SUCCESS_FETCH_TIMESTAMP,this.configValueCache.latestSuccessfulFetchTimeMillis)]);case 1:return u.sent(),[4,Q.getInstance().set(K.LATEST_SUCCESS_FETCH_RESULT,h)];case 2:return u.sent(),this.configValueCache.latestFetchState="fetchSucceed",[4,Q.getInstance().set(K.LATEST_FETCH_STATE,"fetchSucceed")];case 3:return u.sent(),[3,8];case 4:return h.ret.getCode()!=204091393?[3,7]:(this.configValueCache.latestSuccessfulFetchTimeMillis=Date.now(),[4,Q.getInstance().set(K.LATEST_SUCCESS_FETCH_TIMESTAMP,this.configValueCache.latestSuccessfulFetchTimeMillis)]);case 5:return u.sent(),this.configValueCache.latestFetchState="fetchSucceed",[4,Q.getInstance().set(K.LATEST_FETCH_STATE,"fetchSucceed")];case 6:return u.sent(),[3,8];case 7:return[2,Promise.reject(ue.constructExcpFromRet(h.ret))];case 8:return[2,Promise.resolve()]}})})}).catch(function(h){return re(f,void 0,void 0,function(){return ne(this,function(u){switch(u.label){case 0:return this.configValueCache.latestFetchState="fetchFailed",[4,Q.getInstance().set(K.LATEST_FETCH_STATE,"fetchFailed")];case 1:return u.sent(),h instanceof ue?h.code!=le.FETCH_THROTTLE_LIMIT.code?[3,3]:(this.configValueCache.latestFetchState="throttleLimit",[4,Q.getInstance().set(K.LATEST_FETCH_STATE,"throttleLimit")]):[3,4];case 2:u.sent(),u.label=3;case 3:return[2,Promise.reject(h)];case 4:return h instanceof $?[2,Promise.reject(h)]:[2,Promise.reject(new ue(le.FETCH_FAILED,h))];case 5:return[2]}})})})];case 4:E.sent(),E.label=5;case 5:return[2]}})})},t.prototype.getValueAsBoolean=function(e){return this.configValueCache.getValueAsBoolean(e)},t.prototype.getValueAsNumber=function(e){return this.configValueCache.getValueAsNumber(e)},t.prototype.getValueAsString=function(e){return this.configValueCache.getValueAsString(e)},t.prototype.getMergedAll=function(){return this.configValueCache.getMergedAll()},t.prototype.getValue=function(e){return this.configValueCache.getValue(e)},t.prototype.loadLastFetched=function(){return re(this,void 0,void 0,function(){var e,r,n,i,a,o,f,E;return ne(this,function(h){switch(h.label){case 0:return[4,Q.getInstance().query(K.LATEST_SUCCESS_FETCH_RESULT)];case 1:if((e=h.sent())&&e.tag){if(r=new xt("remote"),n=new Map,e.configItems&&e.configItems.length!=0)for(a=0;a<e.configItems.length;a++)n.set(e.configItems[a].name,e.configItems[a].value);if(r.setConfig(n),i=new Array,e.experiments&&e.experiments.length!=0)for(a=0;a<e.experiments.length;a++){for(o=new Map,f=Object.keys(e.experiments[a]),E=0;f&&E<f.length;E++)o.set(f[E],e.experiments[a][f[E]]);i.push(o)}return r.experiments=i,[2,Promise.resolve(r)]}return[2,Promise.resolve(null)]}})})},t.prototype.setUserInfoPersistence=function(e){Q.setUserInfoPersistence(e)},t.prototype.setCustomAttributes=function(e){return re(this,void 0,void 0,function(){var r;return ne(this,function(n){switch(n.label){case 0:return e!=null&&e!=null?[3,2]:[4,Q.getInstance().remove(K.CUSTOM_ATTRIBUTES)];case 1:return n.sent(),[3,4];case 2:return r=this.strMapToObj(e),[4,Q.getInstance().set(K.CUSTOM_ATTRIBUTES,r)];case 3:n.sent(),n.label=4;case 4:return[2,Promise.resolve()]}})})},t.prototype.getCustomAttributes=function(){return re(this,void 0,void 0,function(){var e;return ne(this,function(r){switch(r.label){case 0:return[4,Q.getInstance().query(K.CUSTOM_ATTRIBUTES)];case 1:return e=r.sent(),[2,Promise.resolve(this.ObjToMap(e))]}})})},t.prototype.setCryptImp=function(e){return e?e.decrypt&&e.decrypt instanceof Function&&e.encrypt&&e.encrypt instanceof Function?(t.cryptImpl=e,!0):(Ge.error("the crypt must have decrypt and encrypt method."),!1):(Ge.error("the crypt is not available."),!1)},t.getCryptImp=function(){return t.cryptImpl},t.prototype.clearAll=function(){return re(this,void 0,void 0,function(){var e;return ne(this,function(r){switch(r.label){case 0:return e=new Map,this.configValueCache.setDefaultConfig(e),this.configValueCache.setRemoteConfig(e),[4,Q.getInstance().remove(K.LATEST_APPLY_FETCH_RESULT)];case 1:return r.sent(),[4,Q.getInstance().remove(K.LATEST_SUCCESS_FETCH_RESULT)];case 2:return r.sent(),[4,Q.getInstance().remove(K.LATEST_SUCCESS_FETCH_TIMESTAMP)];case 3:return r.sent(),[4,Q.getInstance().remove(K.LATEST_FETCH_STATE)];case 4:return r.sent(),[4,Q.getInstance().remove(K.THROTTLE)];case 5:return r.sent(),[4,Q.getInstance().remove(K.LATEST_DEFAULT_CONFIG)];case 6:return r.sent(),this.fetchReqTimeoutMillis=6e4,this.minFetchIntervalMillis=432e5,this.configValueCache.latestSuccessfulFetchTimeMillis=-1,this.configValueCache.latestFetchState="noFetchExecuted",[2,Promise.resolve()]}})})},t.prototype.strMapToObj=function(e){var r=Object.create(null);return e&&e.forEach(function(n,i){r[i]=n}),r},t.prototype.ObjToMap=function(e){if(!e)return new Map;for(var r=new Map,n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];r.set(a,e[a])}return r},t.cryptImpl=void 0,t}(),Mi=new Yr(function(){return new Ot});X.registerApiProvider("remoteConfig",function(){return Mi.get()});export{ue as AGCRemoteConfigException};
